# 5-2. スタイリング手法

この章では、Reactアプリケーションでスタイルを適用する様々な手法について学びます。適切なスタイリング手法を選択することで、保守性の高い、美しいUIを作成できるようになります。

---

## 目次

- [CSS Modules](#css-modules)
- [CSS-in-JS (Emotion / styled-components)](#css-in-js-emotion--styled-components)
- [Tailwind CSS (概要とセットアップ)](#tailwind-css-概要とセットアップ)
- [まとめ](#まとめ)
- [演習問題](#演習問題)

---

## CSS Modules

### CSS Modulesとは
CSS Modulesは、**CSSファイルをモジュール化して、クラス名の衝突を防ぐ**仕組みです。各コンポーネントに専用のCSSファイルを作成し、スコープを分離できます。

### CSS Modulesの特徴
- **スコープの分離**: クラス名が自動的に一意になる
- **型安全性**: TypeScriptと組み合わせて型チェックが可能
- **標準的なCSS**: 通常のCSSと同じように書ける
- **パフォーマンス**: バンドル時に最適化される

### CSS Modulesの基本構文

```javascript
// Button.module.css
.button {
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
}

// Button.jsx
import styles from './Button.module.css';

function Button() {
    return <button className={styles.button}>クリック</button>;
}
```

### 実践例: CSS Modulesの基本

```javascript
// src/components/Button/Button.module.css
.button {
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    color: white;
    background-color: #007bff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.button:hover {
    background-color: #0056b3;
}

.button:active {
    background-color: #004085;
}

.primary {
    background-color: #007bff;
}

.secondary {
    background-color: #6c757d;
}

.danger {
    background-color: #dc3545;
}

// src/components/Button/Button.jsx
import styles from './Button.module.css';

function Button({ children, variant = 'primary', onClick }) {
    const buttonClass = `${styles.button} ${styles[variant]}`;
    
    return (
        <button className={buttonClass} onClick={onClick}>
            {children}
        </button>
    );
}

export default Button;
```

### 実践例: CSS Modulesの使用

```javascript
// src/App.jsx
import Button from './components/Button/Button';
import './App.module.css';

function App() {
    return (
        <div className={styles.container}>
            <h1>CSS Modulesの例</h1>
            <Button variant="primary">プライマリ</Button>
            <Button variant="secondary">セカンダリ</Button>
            <Button variant="danger">危険</Button>
        </div>
    );
}

// src/App.module.css
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

h1 {
    color: #333;
    margin-bottom: 20px;
}
```

### CSS Modulesの複数クラス

```javascript
// 複数のクラスを適用
import styles from './Component.module.css';

function Component() {
    return (
        <div className={`${styles.container} ${styles.active}`}>
            コンテンツ
        </div>
    );
}

// または、clsxやclassnamesライブラリを使用
import clsx from 'clsx';
import styles from './Component.module.css';

function Component({ isActive }) {
    return (
        <div className={clsx(styles.container, {
            [styles.active]: isActive
        })}>
            コンテンツ
        </div>
    );
}
```

### 実践例: CSS Modulesの応用

```javascript
// src/components/Card/Card.module.css
.card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 20px;
}

.header {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 12px;
    color: #333;
}

.body {
    color: #666;
    line-height: 1.6;
}

.footer {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

// src/components/Card/Card.jsx
import styles from './Card.module.css';

function Card({ title, children, footer }) {
    return (
        <div className={styles.card}>
            {title && <div className={styles.header}>{title}</div>}
            <div className={styles.body}>{children}</div>
            {footer && <div className={styles.footer}>{footer}</div>}
        </div>
    );
}

export default Card;
```

### CSS ModulesとTypeScript

TypeScriptを使用する場合、型定義ファイルを作成できます。

```typescript
// Button.module.css.d.ts（自動生成される場合もある）
declare const styles: {
    readonly button: string;
    readonly primary: string;
    readonly secondary: string;
};

export default styles;
```

---

## CSS-in-JS (Emotion / styled-components)

### CSS-in-JSとは
CSS-in-JSは、**JavaScript内でCSSを記述する**手法です。コンポーネントとスタイルを同じ場所に書けるため、保守性が向上します。

### CSS-in-JSの特徴
- **コンポーネント単位**: スタイルがコンポーネントに紐づく
- **動的なスタイル**: JavaScriptの変数を使って動的にスタイルを変更できる
- **型安全性**: TypeScriptと組み合わせて型チェックが可能
- **テーマ機能**: テーマシステムを簡単に実装できる

### Emotionの基本構文

```javascript
import { css } from '@emotion/react';

const style = css`
    padding: 10px;
    background-color: #007bff;
    color: white;
`;

function Button() {
    return <button css={style}>クリック</button>;
}
```

### Emotionのインストール

```bash
npm install @emotion/react @emotion/styled
```

### 実践例: Emotionの基本

```javascript
// src/components/Button/Button.jsx
import { css } from '@emotion/react';

const buttonStyle = css`
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    color: white;
    background-color: #007bff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s;
    
    &:hover {
        background-color: #0056b3;
    }
    
    &:active {
        background-color: #004085;
    }
`;

function Button({ children, onClick }) {
    return (
        <button css={buttonStyle} onClick={onClick}>
            {children}
        </button>
    );
}

export default Button;
```

### 実践例: Emotionの動的スタイル

```javascript
// src/components/Button/Button.jsx
import { css } from '@emotion/react';

function Button({ children, variant = 'primary', size = 'medium', onClick }) {
    const baseStyle = css`
        font-weight: 600;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
    `;
    
    const variantStyle = css`
        ${variant === 'primary' && `
            background-color: #007bff;
            color: white;
            &:hover {
                background-color: #0056b3;
            }
        `}
        ${variant === 'secondary' && `
            background-color: #6c757d;
            color: white;
            &:hover {
                background-color: #5a6268;
            }
        `}
        ${variant === 'danger' && `
            background-color: #dc3545;
            color: white;
            &:hover {
                background-color: #c82333;
            }
        `}
    `;
    
    const sizeStyle = css`
        ${size === 'small' && `
            padding: 8px 16px;
            font-size: 14px;
        `}
        ${size === 'medium' && `
            padding: 12px 24px;
            font-size: 16px;
        `}
        ${size === 'large' && `
            padding: 16px 32px;
            font-size: 18px;
        `}
    `;
    
    return (
        <button css={[baseStyle, variantStyle, sizeStyle]} onClick={onClick}>
            {children}
        </button>
    );
}

export default Button;
```

### styled-componentsの基本構文

```javascript
import styled from 'styled-components';

const Button = styled.button`
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
`;

function App() {
    return <Button>クリック</Button>;
}
```

### styled-componentsのインストール

```bash
npm install styled-components
```

### 実践例: styled-componentsの基本

```javascript
// src/components/Button/Button.jsx
import styled from 'styled-components';

const StyledButton = styled.button`
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    color: white;
    background-color: #007bff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s;
    
    &:hover {
        background-color: #0056b3;
    }
    
    &:active {
        background-color: #004085;
    }
`;

function Button({ children, onClick }) {
    return <StyledButton onClick={onClick}>{children}</StyledButton>;
}

export default Button;
```

### 実践例: styled-componentsの動的スタイル

```javascript
// src/components/Button/Button.jsx
import styled from 'styled-components';

const StyledButton = styled.button`
    padding: ${props => {
        if (props.size === 'small') return '8px 16px';
        if (props.size === 'large') return '16px 32px';
        return '12px 24px';
    }};
    font-size: ${props => {
        if (props.size === 'small') return '14px';
        if (props.size === 'large') return '18px';
        return '16px';
    }};
    font-weight: 600;
    color: white;
    background-color: ${props => {
        if (props.variant === 'primary') return '#007bff';
        if (props.variant === 'secondary') return '#6c757d';
        if (props.variant === 'danger') return '#dc3545';
        return '#007bff';
    }};
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s;
    
    &:hover {
        background-color: ${props => {
            if (props.variant === 'primary') return '#0056b3';
            if (props.variant === 'secondary') return '#5a6268';
            if (props.variant === 'danger') return '#c82333';
            return '#0056b3';
        }};
    }
`;

function Button({ children, variant = 'primary', size = 'medium', onClick }) {
    return (
        <StyledButton variant={variant} size={size} onClick={onClick}>
            {children}
        </StyledButton>
    );
}

export default Button;
```

### 実践例: styled-componentsのテーマ

```javascript
// src/theme.js
export const theme = {
    colors: {
        primary: '#007bff',
        secondary: '#6c757d',
        danger: '#dc3545',
        success: '#28a745',
        background: '#f8f9fa',
        text: '#333'
    },
    spacing: {
        small: '8px',
        medium: '16px',
        large: '24px'
    },
    borderRadius: {
        small: '4px',
        medium: '6px',
        large: '8px'
    }
};

// src/components/Button/Button.jsx
import styled from 'styled-components';

const StyledButton = styled.button`
    padding: ${props => props.theme.spacing.medium} ${props => props.theme.spacing.large};
    font-size: 16px;
    font-weight: 600;
    color: white;
    background-color: ${props => props.theme.colors.primary};
    border: none;
    border-radius: ${props => props.theme.borderRadius.medium};
    cursor: pointer;
    transition: background-color 0.2s;
    
    &:hover {
        background-color: ${props => props.theme.colors.secondary};
    }
`;

// src/App.jsx
import { ThemeProvider } from 'styled-components';
import { theme } from './theme';
import Button from './components/Button/Button';

function App() {
    return (
        <ThemeProvider theme={theme}>
            <Button>テーマを使用したボタン</Button>
        </ThemeProvider>
    );
}
```

### Emotion vs styled-components

| 特徴 | Emotion | styled-components |
|------|---------|-------------------|
| **構文** | `css`プロップ | スタイル付きコンポーネント |
| **パフォーマンス** | 高速 | やや重い |
| **テーマ** | サポート | 強力なサポート |
| **TypeScript** | 良好 | 良好 |

---

## Tailwind CSS (概要とセットアップ)

### Tailwind CSSとは
Tailwind CSSは、**ユーティリティファーストのCSSフレームワーク**です。事前に定義されたクラスを組み合わせて、素早くスタイルを適用できます。

### Tailwind CSSの特徴
- **ユーティリティクラス**: 小さなクラスを組み合わせてスタイルを作成
- **カスタマイズ可能**: 設定ファイルでカスタマイズできる
- **パージ機能**: 使用されていないCSSを自動的に削除
- **レスポンシブ**: モバイルファーストのレスポンシブデザイン

### Tailwind CSSのインストール

```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

### Tailwind CSSの設定

```javascript
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
    content: [
        "./index.html",
        "./src/**/*.{js,ts,jsx,tsx}",
    ],
    theme: {
        extend: {},
    },
    plugins: [],
}
```

### CSSファイルの設定

```css
/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;
```

### 実践例: Tailwind CSSの基本

```javascript
// src/components/Button/Button.jsx
function Button({ children, variant = 'primary', onClick }) {
    const baseClasses = 'px-6 py-3 font-semibold rounded-lg transition-colors';
    
    const variantClasses = {
        primary: 'bg-blue-600 text-white hover:bg-blue-700',
        secondary: 'bg-gray-600 text-white hover:bg-gray-700',
        danger: 'bg-red-600 text-white hover:bg-red-700'
    };
    
    return (
        <button 
            className={`${baseClasses} ${variantClasses[variant]}`}
            onClick={onClick}
        >
            {children}
        </button>
    );
}

export default Button;
```

### 実践例: Tailwind CSSの応用

```javascript
// src/components/Card/Card.jsx
function Card({ title, children, footer }) {
    return (
        <div className="bg-white rounded-lg shadow-md p-6 mb-5">
            {title && (
                <h2 className="text-2xl font-bold text-gray-800 mb-3">
                    {title}
                </h2>
            )}
            <div className="text-gray-600 leading-relaxed">
                {children}
            </div>
            {footer && (
                <div className="mt-4 pt-4 border-t border-gray-200 flex justify-between items-center">
                    {footer}
                </div>
            )}
        </div>
    );
}

export default Card;
```

### 実践例: Tailwind CSSのレスポンシブ

```javascript
// src/components/Grid/Grid.jsx
function Grid({ children }) {
    return (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
            {children}
        </div>
    );
}

export default Grid;
```

### 実践例: Tailwind CSSのカスタマイズ

```javascript
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
    content: [
        "./index.html",
        "./src/**/*.{js,ts,jsx,tsx}",
    ],
    theme: {
        extend: {
            colors: {
                primary: {
                    50: '#eff6ff',
                    100: '#dbeafe',
                    500: '#3b82f6',
                    600: '#2563eb',
                    700: '#1d4ed8',
                },
            },
            spacing: {
                '18': '4.5rem',
                '88': '22rem',
            },
        },
    },
    plugins: [],
}
```

### Tailwind CSSのクラス名の管理

クラス名が長くなる場合、`clsx`や`classnames`ライブラリを使用します。

```javascript
import clsx from 'clsx';

function Button({ children, variant, size, disabled }) {
    return (
        <button
            className={clsx(
                'px-6 py-3 font-semibold rounded-lg transition-colors',
                {
                    'bg-blue-600 text-white hover:bg-blue-700': variant === 'primary',
                    'bg-gray-600 text-white hover:bg-gray-700': variant === 'secondary',
                    'px-4 py-2 text-sm': size === 'small',
                    'px-8 py-4 text-lg': size === 'large',
                    'opacity-50 cursor-not-allowed': disabled,
                }
            )}
        >
            {children}
        </button>
    );
}
```

### 実践例: Tailwind CSSの完全な例

```javascript
// src/App.jsx
import Button from './components/Button/Button';
import Card from './components/Card/Card';

function App() {
    return (
        <div className="min-h-screen bg-gray-100 py-8">
            <div className="max-w-6xl mx-auto px-4">
                <h1 className="text-4xl font-bold text-gray-900 mb-8">
                    Tailwind CSSの例
                </h1>
                
                <div className="mb-8">
                    <Button variant="primary">プライマリ</Button>
                    <Button variant="secondary" className="ml-4">
                        セカンダリ
                    </Button>
                    <Button variant="danger" className="ml-4">
                        危険
                    </Button>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <Card title="カード1">
                        これは最初のカードです。
                    </Card>
                    <Card title="カード2">
                        これは2番目のカードです。
                    </Card>
                    <Card title="カード3">
                        これは3番目のカードです。
                    </Card>
                </div>
            </div>
        </div>
    );
}

export default App;
```

### スタイリング手法の比較

| 手法 | メリット | デメリット | 適用場面 |
|------|---------|-----------|---------|
| **CSS Modules** | 標準的、型安全 | 動的スタイルが難しい | 中規模プロジェクト |
| **Emotion** | 柔軟、高速 | 学習コスト | 動的スタイルが多い |
| **styled-components** | 直感的、テーマ機能 | パフォーマンス | 大規模プロジェクト |
| **Tailwind CSS** | 開発速度、一貫性 | クラス名が長い | プロトタイプ、小〜中規模 |

---

## まとめ

この章では、Reactアプリケーションのスタイリング手法について学びました。

### 学んだこと
- **CSS Modules**: モジュール化されたCSSでスコープを分離
- **Emotion**: JavaScript内でCSSを記述するライブラリ
- **styled-components**: スタイル付きコンポーネントを作成
- **Tailwind CSS**: ユーティリティファーストのCSSフレームワーク

### 重要なポイント
1. **CSS Modules**: クラス名の衝突を防ぎ、標準的なCSSを書ける
2. **CSS-in-JS**: コンポーネントとスタイルを同じ場所に書ける
3. **Tailwind CSS**: 素早くスタイルを適用できる
4. **選択基準**: プロジェクトの規模や要件に応じて適切な手法を選択

### スタイリング手法の選択指針
- **小規模プロジェクト**: Tailwind CSS
- **中規模プロジェクト**: CSS Modules
- **大規模プロジェクト**: styled-components または Emotion
- **動的スタイルが多い**: CSS-in-JS（Emotion / styled-components）
- **型安全性を重視**: CSS Modules + TypeScript

### 次のステップ
次の章では、UIカタログ（Storybook）について詳しく学びます。

---

## 演習問題

### 問題1: CSS Modules
CSS Modulesを使って、ボタンコンポーネントを作成してください。

<details>
<summary>解答例</summary>

```javascript
// Button.module.css
.button {
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    color: white;
    background-color: #007bff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.button:hover {
    background-color: #0056b3;
}

// Button.jsx
import styles from './Button.module.css';

function Button({ children, onClick }) {
    return (
        <button className={styles.button} onClick={onClick}>
            {children}
        </button>
    );
}

export default Button;
```
</details>

### 問題2: Emotion
Emotionを使って、動的なスタイルを持つボタンコンポーネントを作成してください。

<details>
<summary>解答例</summary>

```javascript
import { css } from '@emotion/react';

function Button({ children, variant = 'primary', onClick }) {
    const buttonStyle = css`
        padding: 12px 24px;
        font-size: 16px;
        font-weight: 600;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        background-color: ${variant === 'primary' ? '#007bff' : '#6c757d'};
        
        &:hover {
            background-color: ${variant === 'primary' ? '#0056b3' : '#5a6268'};
        }
    `;
    
    return (
        <button css={buttonStyle} onClick={onClick}>
            {children}
        </button>
    );
}

export default Button;
```
</details>

### 問題3: styled-components
styled-componentsを使って、サイズが変更できるボタンコンポーネントを作成してください。

<details>
<summary>解答例</summary>

```javascript
import styled from 'styled-components';

const StyledButton = styled.button`
    padding: ${props => {
        if (props.size === 'small') return '8px 16px';
        if (props.size === 'large') return '16px 32px';
        return '12px 24px';
    }};
    font-size: ${props => {
        if (props.size === 'small') return '14px';
        if (props.size === 'large') return '18px';
        return '16px';
    }};
    font-weight: 600;
    color: white;
    background-color: #007bff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    
    &:hover {
        background-color: #0056b3;
    }
`;

function Button({ children, size = 'medium', onClick }) {
    return (
        <StyledButton size={size} onClick={onClick}>
            {children}
        </StyledButton>
    );
}

export default Button;
```
</details>

### 問題4: Tailwind CSS
Tailwind CSSを使って、レスポンシブなカードコンポーネントを作成してください。

<details>
<summary>解答例</summary>

```javascript
function Card({ title, children }) {
    return (
        <div className="bg-white rounded-lg shadow-md p-6 mb-5">
            {title && (
                <h2 className="text-2xl font-bold text-gray-800 mb-3">
                    {title}
                </h2>
            )}
            <div className="text-gray-600 leading-relaxed">
                {children}
            </div>
        </div>
    );
}

export default Card;
```
</details>

### 問題5: スタイリング手法の組み合わせ
CSS ModulesとTailwind CSSを組み合わせて、カスタムスタイルとユーティリティクラスを併用するコンポーネントを作成してください。

<details>
<summary>解答例</summary>

```javascript
// Card.module.css
.card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: 20px;
}

// Card.jsx
import styles from './Card.module.css';
import clsx from 'clsx';

function Card({ title, children, className }) {
    return (
        <div className={clsx(styles.card, className)}>
            {title && <h2 className="text-2xl font-bold mb-3">{title}</h2>}
            <div className="text-gray-600">{children}</div>
        </div>
    );
}

export default Card;
```
</details>

---

お疲れ様でした！次の章に進みましょう。

