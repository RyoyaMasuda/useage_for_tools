# Next.js 完全学習マスターロードマップ (App Router & Prisma Integrated Edition)

## 第1章：Next.js の基礎と環境構築
* **Next.jsプロジェクトの始め方**
    * フレームワークとライブラリの違い
    * `create-next-app` によるセットアップ
    * プロジェクト構造の理解 (appディレクトリ, public, next.config.js)
* **ローカル開発環境の構築 (サンプルアプリ基盤)**
    * ローカル開発環境のセットアップ
    * 開発環境のストレージサーバー（MinIOやDocker等の活用）
* **ORMライブラリ「Prisma」の導入**
    * Prisma schemaの概要と定義
    * Prisma Clientの概要と生成
    * DBビジュアルエディター「Prisma Studio」の使い方
    * マイグレーションとシーディング (初期データ投入)

## 第2章：アプリケーションのルーティング
* **ファイルシステムベースルーティング**
    * Segment構成ファイル (page.tsx, layout.tsx, template.tsx 等)
    * Segment構成フォルダ (Route Groups, Dynamic Routes)
    * アプリケーションのルーティング定義
* **SPAならではのナビゲーション**
    * `<Link>` コンポーネント
    * `useRouter` フック
    * サーバーサイドでのリダイレクト
* **ネスト可能なレイアウト**
    * 共通レイアウトの適用
    * ネストされたレイアウトの挙動

## 第3章：Server Componentとレンダリング
* **レンダリングの仕組み**
    * Server ComponentとClient Componentの違いと使い分け
    * 境界線 (Boundary) の設計
    * Routeのレンダリングプロセス
* **Server Componentのデータ取得**
    * 非同期コンポーネント (`async/await`)
    * 動的データ取得 (Dynamic Rendering)
    * 静的データ取得 (Static Rendering)
* **Routeのメタデータ**
    * 静的メタデータと動的メタデータ (`generateMetadata`)

## 第4章：データ取得とキャッシュ (Fetch & Prisma)
* **fetch関数でのデータ取得**
    * fetch関数の基本
    * Requestのメモ化 (Request Memoization)
    * fetch関数のキャッシュ (Data Cache)
* **Prisma Clientでのデータ取得**
    * Prismaを用いたDBアクセス
    * Prisma ClientのRequestのメモ化
    * Prisma Clientのキャッシュ戦略 (unstable_cache 等の活用)
* **サンプルコード共通のUIコンポーネント**
    * データ表示用コンポーネントの実装

## 第5章：Route Handler (API Routes)
* **Route Handlerの基本**
    * Route Handlerの定義 (`route.ts`)
    * GET, POST, PUT, DELETE の実装
* **レンダリングと挙動**
    * Route Handlerのレンダリング (Static vs Dynamic)
    * Request / Response オブジェクトの操作
* **Route Handlerの使用例**
    * 外部APIプロキシ
    * Webhookエンドポイント

## 第6章：データ更新とUI (Server Actions)
* **Server Actionの基礎**
    * Server Actionの定義とフォーム連携
    * `use server` ディレクティブ
* **CRUD実装**
    * Server Actionによるデータ保存 (Create/Update)
    * Server Actionによるデータ削除 (Delete)
    * バックエンド間連携によるデータ保存・削除
* **高度なUIフィードバック**
    * Server Actionのエラーハンドリング
    * フィードバックUI表示 (Toast, Alert)
    * `useOptimistic` による楽観的UI更新
    * Server ActionのFormバリデーション
* **Revalidate (再検証) の設計**
    * キャッシュパージの戦略 (`revalidatePath`, `revalidateTag`)

## 第7章：高度なルーティングとモーダル連携
* **Parallel RoutesとIntercepting Routes**
    * Parallel Routes (並行ルーティング) の概念
    * Intercepting Routes (ルートの横取り) の概念
* **モーダル表示の実践**
    * 汎用的なモーダルコンポーネントの作成
    * Intercepting Routesを用いたURL連動モーダルの実装
    * モーダル内でのデータ連携

## 第8章：認証機能 (NextAuth.js)
* **認証基盤の構築**
    * 環境変数の設定
    * OAuthクライアントの作成 (Google, GitHub等)
    * NextAuth.js (Auth.js) の導入と設定
* **認証とUIの連携**
    * ログインユーザーのデータ表示 (Session管理)
    * 閲覧ユーザーに応じた表示分岐 (保護されたルート、権限管理)

## 第9章：パフォーマンスとキャッシュの最適化
* **パフォーマンスへの影響要因**
    * コンポーネント構造とパフォーマンス
    * クライアントバンドルサイズの削減
* **Next.jsのキャッシュシステム (The 4 Caches)**
    1. Request Memoization (リクエストの重複排除)
    2. Data Cache (サーバー間のデータ永続化)
    3. Full Route Cache (ビルド時のHTMLキャッシュ)
    4. Router Cache (クライアント側のナビゲーションキャッシュ)
* **レンダリング戦略の最適化**
    * `fetchCache` の設定
    * 静的Routeを増やす実装 (Generate Static Params)
    * SSG (Static Site Generation) Routeの実装
    * SSG Routeのパフォーマンス定量評価
* **アセットの最適化**
    * 画像 (`next/image`)、フォント (`next/font`)、スクリプト (`next/script`)

## 第10章：デプロイと運用
* **ビルドとデプロイ**
    * ビルドプロセスの理解
    * Vercel 等へのデプロイ
    * 環境変数の管理

## 付録：Prisma 詳細
* **A.1 Prisma schemaの概要**
* **A.2 Prisma Clientの概要**
* **A.3 Prismaのマイグレーションとシーディング**