# 2. 文法・変数の基礎

この章では、TypeScriptの基本的な文法と変数について学びます。これらの基礎を理解することで、TypeScriptのコードを正しく書けるようになります。

---

## 目次

- [リテラルについて理解しよう](#リテラルについて理解しよう)
- [エスケープシーケンスを使おう](#エスケープシーケンスを使おう)
- [変数を使おう（let）](#変数を使おうlet)
- [定数（不変変数）を使おう（const）](#定数不変変数を使おうconst)
- [変数の命名規則](#変数の命名規則)
- [コメントアウトとデバッグ](#コメントアウトとデバッグ)
- [TypeScriptとJavaScriptの関係](#typescriptとjavascriptの関係)
- [TypeScriptのエディタ補完](#typescriptのエディタ補完)
- [テンプレートリテラルと文字列結合](#テンプレートリテラルと文字列結合)
- [まとめ](#まとめ)
- [演習問題](#演習問題)

---

## リテラルについて理解しよう

### リテラルとは
リテラルは、**コード内に直接記述される値**です。文字列、数値、真偽値などを直接書くことができます。

### 文字列リテラル

```typescript
// ダブルクォート
const message1 = "こんにちは";

// シングルクォート
const message2 = 'こんにちは';

// どちらも同じ意味
console.log(message1); // 'こんにちは'
console.log(message2); // 'こんにちは'
```

### 数値リテラル

```typescript
// 整数
const age = 25;

// 小数
const price = 99.99;

// 負の数
const temperature = -10;

// 指数表記
const largeNumber = 1e6; // 1000000
```

### 真偽値リテラル

```typescript
const isActive = true;
const isDisabled = false;
```

### nullとundefinedリテラル

```typescript
const value1 = null;
const value2 = undefined;
```

### 実践例: リテラル

```typescript
// src/literals.ts
// 文字列リテラル
const name = "太郎";
const greeting = 'こんにちは';

// 数値リテラル
const age = 25;
const height = 175.5;
const score = 100;

// 真偽値リテラル
const isStudent = true;
const isWorking = false;

// nullとundefined
const empty = null;
const notDefined = undefined;

console.log(`名前: ${name}, 年齢: ${age}`);
console.log(`学生: ${isStudent}, 働いている: ${isWorking}`);
```

### リテラルの種類まとめ

| 種類 | 例 | 説明 |
|------|-----|------|
| **文字列** | `"Hello"`, `'World'` | テキストデータ |
| **数値** | `42`, `3.14`, `-10` | 数値データ |
| **真偽値** | `true`, `false` | 真偽値 |
| **null** | `null` | 値が存在しない |
| **undefined** | `undefined` | 未定義 |

---

## エスケープシーケンスを使おう

### エスケープシーケンスとは
エスケープシーケンスは、**特殊な文字を表現するための記法**です。バックスラッシュ（`\`）で始まります。

### 主なエスケープシーケンス

```typescript
// 改行
const message1 = "1行目\n2行目";
console.log(message1);
// 出力:
// 1行目
// 2行目

// タブ
const message2 = "名前\t太郎";
console.log(message2); // 名前    太郎

// シングルクォート
const message3 = 'It\'s a beautiful day';
console.log(message3); // It's a beautiful day

// ダブルクォート
const message4 = "He said \"Hello\"";
console.log(message4); // He said "Hello"

// バックスラッシュ
const path = "C:\\Users\\Documents";
console.log(path); // C:\Users\Documents
```

### エスケープシーケンス一覧

| エスケープシーケンス | 意味 |
|---------------------|------|
| `\n` | 改行（Newline） |
| `\t` | タブ（Tab） |
| `\'` | シングルクォート |
| `\"` | ダブルクォート |
| `\\` | バックスラッシュ |
| `\r` | キャリッジリターン |
| `\b` | バックスペース |

### 実践例: エスケープシーケンス

```typescript
// src/escape.ts
// 改行を含むメッセージ
const multilineMessage = "1行目\n2行目\n3行目";
console.log(multilineMessage);

// タブを使った表形式
const table = "名前\t年齢\t都市\n太郎\t25\t東京\n花子\t30\t大阪";
console.log(table);

// クォートを含む文字列
const quote1 = '彼は"こんにちは"と言った';
const quote2 = "It's a beautiful day";
console.log(quote1);
console.log(quote2);

// パスの表現
const filePath = "C:\\Users\\Documents\\file.txt";
console.log(filePath);

// 実践例: メール本文
const emailBody = "件名: お問い合わせ\n\nこんにちは、\n\nお問い合わせ内容です。\n\nよろしくお願いします。";
console.log(emailBody);
```

---

## 変数を使おう（let）

### 変数とは
変数は、**値を保存しておくための箱**のようなものです。後で値を変更できます。

### letキーワード

```typescript
// 変数の宣言
let name: string;
name = "太郎";

// 宣言と同時に値を代入
let age: number = 25;

// 型推論（型を省略可能）
let city = "東京"; // string型と推論される
```

### 変数の再代入

```typescript
let count = 10;
console.log(count); // 10

count = 20;
console.log(count); // 20

count = count + 5;
console.log(count); // 25
```

### 変数のスコープ

```typescript
// グローバルスコープ
let globalVar = "グローバル";

function test() {
    // ローカルスコープ
    let localVar = "ローカル";
    console.log(globalVar); // アクセス可能
    console.log(localVar);  // アクセス可能
}

console.log(globalVar); // アクセス可能
// console.log(localVar); // エラー: アクセス不可
```

### 実践例: letを使った変数

```typescript
// src/variables.ts
// 基本的な変数の宣言
let userName: string = "太郎";
let userAge: number = 25;
let isActive: boolean = true;

console.log(`名前: ${userName}, 年齢: ${userAge}, アクティブ: ${isActive}`);

// 変数の再代入
let score = 0;
console.log(`初期スコア: ${score}`);

score = 100;
console.log(`更新後のスコア: ${score}`);

score = score + 50;
console.log(`追加後のスコア: ${score}`);

// 実践例: カウンター
let counter = 0;
counter++;
console.log(`カウンター: ${counter}`);

counter += 10;
console.log(`カウンター: ${counter}`);

// 実践例: ユーザー情報の更新
let userStatus = "オフライン";
console.log(`ステータス: ${userStatus}`);

userStatus = "オンライン";
console.log(`ステータス: ${userStatus}`);
```

---

## 定数（不変変数）を使おう（const）

### 定数とは
定数は、**一度値を設定すると変更できない変数**です。`const`キーワードで宣言します。

### constキーワード

```typescript
// 定数の宣言
const PI = 3.14159;
const MAX_SIZE = 100;

// 再代入はエラー
// PI = 3.14; // エラー: 定数は再代入できない
```

### constの特徴
1. **再代入不可**: 一度値を設定すると変更できない
2. **ブロックスコープ**: `let`と同じくブロックスコープ
3. **型推論**: 型を省略すると自動的に推論される

### constとletの使い分け

```typescript
// 変更しない値はconst
const API_URL = "https://api.example.com";
const MAX_RETRIES = 3;

// 変更する値はlet
let currentRetry = 0;
let userInput = "";
```

### 実践例: constを使った定数

```typescript
// src/constants.ts
// 定数の宣言
const APP_NAME = "MyApp";
const VERSION = "1.0.0";
const MAX_USERS = 100;

console.log(`${APP_NAME} v${VERSION}`);
console.log(`最大ユーザー数: ${MAX_USERS}`);

// 実践例: 設定値
const CONFIG = {
    apiUrl: "https://api.example.com",
    timeout: 5000,
    retries: 3
};

console.log(`API URL: ${CONFIG.apiUrl}`);
console.log(`タイムアウト: ${CONFIG.timeout}ms`);

// 実践例: 数学定数
const PI = 3.14159;
const E = 2.71828;

function calculateCircleArea(radius: number): number {
    return PI * radius * radius;
}

console.log(`半径5の円の面積: ${calculateCircleArea(5)}`);

// 実践例: 色の定義
const COLORS = {
    RED: "#FF0000",
    GREEN: "#00FF00",
    BLUE: "#0000FF"
};

console.log(`赤色: ${COLORS.RED}`);
```

---

## 変数の命名規則

### 命名規則の基本
変数名は、**意味が分かりやすく、一貫性のある名前**を付けることが重要です。

### 命名規則のルール

#### 1. 使用できる文字
- 英字（a-z, A-Z）
- 数字（0-9）
- アンダースコア（_）
- ドル記号（$）
- **数字で始めることはできない**

```typescript
// 正しい例
let userName = "太郎";
let user_age = 25;
let $price = 100;
let _count = 0;

// 間違った例
// let 1user = "太郎"; // エラー: 数字で始められない
// let user-name = "太郎"; // エラー: ハイフンは使えない
```

#### 2. キャメルケース（推奨）
```typescript
let userName = "太郎";
let userAge = 25;
let isActive = true;
```

#### 3. スネークケース
```typescript
let user_name = "太郎";
let user_age = 25;
let is_active = true;
```

#### 4. 定数は大文字
```typescript
const MAX_SIZE = 100;
const API_URL = "https://api.example.com";
const PI = 3.14159;
```

### 命名のベストプラクティス

```typescript
// 良い例: 意味が明確
let userName = "太郎";
let itemCount = 10;
let isLoggedIn = true;

// 悪い例: 意味が不明確
let x = "太郎";
let n = 10;
let flag = true;

// 良い例: 動詞を使う（関数名）
function getUserName() { }
function calculateTotal() { }
function isValid() { }

// 良い例: 名詞を使う（変数名）
let userName = "太郎";
let total = 100;
let isValid = true;
```

### 実践例: 命名規則

```typescript
// src/naming.ts
// キャメルケース（変数名）
let firstName = "太郎";
let lastName = "山田";
let userAge = 25;
let isActive = true;

// 定数は大文字
const MAX_RETRIES = 3;
const API_BASE_URL = "https://api.example.com";
const DEFAULT_TIMEOUT = 5000;

// 意味のある名前
let shoppingCartItems = [];
let totalPrice = 0;
let discountPercentage = 10;

// 実践例: ユーザー情報
const user = {
    id: 1,
    name: "太郎",
    email: "taro@example.com",
    isVerified: true
};

console.log(`ユーザー名: ${user.name}`);
console.log(`認証済み: ${user.isVerified}`);
```

---

## コメントアウトとデバッグ

### コメントとは
コメントは、**コードに説明を追加するための機能**です。実行時には無視されます。

### コメントの種類

#### 1. 一行コメント
```typescript
// これは一行コメントです
let name = "太郎"; // 変数の説明
```

#### 2. 複数行コメント
```typescript
/*
これは
複数行の
コメントです
*/
```

#### 3. JSDocコメント
```typescript
/**
 * ユーザー名を取得する関数
 * @param userId - ユーザーID
 * @returns ユーザー名
 */
function getUserName(userId: number): string {
    return "太郎";
}
```

### デバッグの方法

#### console.log()を使う
```typescript
let value = 10;
console.log("値:", value); // 値: 10

let user = { name: "太郎", age: 25 };
console.log("ユーザー:", user); // ユーザー: { name: '太郎', age: 25 }
```

#### console.error()を使う
```typescript
if (error) {
    console.error("エラーが発生しました:", error);
}
```

### 実践例: コメントとデバッグ

```typescript
// src/comments.ts
// 一行コメント: 変数の説明
let userName = "太郎"; // ユーザー名を保存

// 複数行コメント: 関数の説明
/*
この関数はユーザー情報を表示します
引数: ユーザー名と年齢
*/
function displayUser(name: string, age: number): void {
    console.log(`名前: ${name}, 年齢: ${age}`);
}

// JSDocコメント
/**
 * 2つの数値を足し算する関数
 * @param a - 最初の数値
 * @param b - 2番目の数値
 * @returns 2つの数値の合計
 */
function add(a: number, b: number): number {
    return a + b;
}

// デバッグ: console.log
let result = add(10, 20);
console.log("計算結果:", result); // 計算結果: 30

// デバッグ: オブジェクトの表示
let user = {
    name: "太郎",
    age: 25,
    city: "東京"
};
console.log("ユーザー情報:", user);

// デバッグ: エラーの表示
try {
    // 何らかの処理
} catch (error) {
    console.error("エラーが発生しました:", error);
}
```

---

## TypeScriptとJavaScriptの関係

### TypeScriptとJavaScriptの関係
TypeScriptは、**JavaScriptの上位互換言語**です。JavaScriptのコードはそのままTypeScriptとして使えます。

### JavaScriptコードをTypeScriptで使う

```typescript
// JavaScriptのコード（そのまま使える）
let name = "太郎";
let age = 25;

function greet(name) {
    return "こんにちは、" + name + "さん";
}

console.log(greet(name));
```

### TypeScriptの型注釈を追加

```typescript
// TypeScriptのコード（型注釈を追加）
let name: string = "太郎";
let age: number = 25;

function greet(name: string): string {
    return "こんにちは、" + name + "さん";
}

console.log(greet(name));
```

### コンパイル後のJavaScript

```javascript
// TypeScriptをコンパイルすると、JavaScriptになる
var name = "太郎";
var age = 25;

function greet(name) {
    return "こんにちは、" + name + "さん";
}

console.log(greet(name));
```

### 実践例: TypeScriptとJavaScriptの関係

```typescript
// src/ts-js-relation.ts
// JavaScriptのコード（そのまま使える）
let message = "Hello, TypeScript!";
let count = 10;

function increment(value: number): number {
    return value + 1;
}

// TypeScriptの型注釈を追加
let typedMessage: string = "Hello, TypeScript!";
let typedCount: number = 10;

// 型エラーの例（コンパイル時に検出）
// let error = increment("10"); // エラー: 文字列は数値ではない

console.log(message);
console.log(increment(count));
```

---

## TypeScriptのエディタ補完

### エディタ補完とは
エディタ補完は、**コードを入力する際に、候補を自動的に表示する機能**です。TypeScriptの型情報を元に動作します。

### 補完の例

#### 1. 変数の補完
```typescript
let userName = "太郎";
// user と入力すると、userNameが候補として表示される
```

#### 2. メソッドの補完
```typescript
let message = "Hello";
// message. と入力すると、toUpperCase, lengthなどのメソッドが表示される
message.toUpperCase();
```

#### 3. 型情報の表示
```typescript
let age: number = 25;
// age にマウスを乗せると、型情報（number）が表示される
```

### VSCodeでの補完機能

#### 1. IntelliSense
- 入力中に候補が自動表示される
- `Ctrl + Space`で手動表示も可能

#### 2. ホバー情報
- 変数や関数にマウスを乗せると、型情報や説明が表示される

#### 3. クイックフィックス
- `Ctrl + .`で、エラーの修正候補が表示される

### 実践例: エディタ補完

```typescript
// src/autocomplete.ts
// 変数の補完
let userName = "太郎";
let userAge = 25;
let isActive = true;

// user と入力すると、userName, userAgeが候補として表示される
console.log(userName);

// メソッドの補完
let message = "Hello, TypeScript";
// message. と入力すると、toUpperCase, toLowerCase, lengthなどが表示される
console.log(message.toUpperCase());
console.log(message.length);

// オブジェクトの補完
let user = {
    name: "太郎",
    age: 25,
    city: "東京"
};

// user. と入力すると、name, age, cityが候補として表示される
console.log(user.name);
console.log(user.age);

// 関数の補完
function greet(name: string): string {
    return `こんにちは、${name}さん`;
}

// greet( と入力すると、引数の型情報が表示される
console.log(greet("太郎"));
```

---

## テンプレートリテラルと文字列結合

### テンプレートリテラルとは
テンプレートリテラルは、**バッククォート（`）で囲んだ文字列**です。変数を埋め込んだり、複数行の文字列を書けます。

### テンプレートリテラルの基本

```typescript
// バッククォートで囲む
const name = "太郎";
const message = `こんにちは、${name}さん`;

console.log(message); // 'こんにちは、太郎さん'
```

### 変数の埋め込み

```typescript
const name = "太郎";
const age = 25;
const message = `名前: ${name}, 年齢: ${age}歳`;

console.log(message); // '名前: 太郎, 年齢: 25歳'
```

### 複数行の文字列

```typescript
const multiline = `
1行目
2行目
3行目
`;

console.log(multiline);
// 出力:
// 1行目
// 2行目
// 3行目
```

### 式の評価

```typescript
const a = 10;
const b = 20;
const result = `${a} + ${b} = ${a + b}`;

console.log(result); // '10 + 20 = 30'
```

### 従来の文字列結合との比較

```typescript
// 従来の方法（+演算子）
const name = "太郎";
const age = 25;
const message1 = "名前: " + name + ", 年齢: " + age + "歳";

// テンプレートリテラル（推奨）
const message2 = `名前: ${name}, 年齢: ${age}歳`;

console.log(message1); // '名前: 太郎, 年齢: 25歳'
console.log(message2); // '名前: 太郎, 年齢: 25歳'
```

### 実践例: テンプレートリテラル

```typescript
// src/template-literals.ts
// 基本的な使い方
const userName = "太郎";
const greeting = `こんにちは、${userName}さん`;
console.log(greeting);

// 複数の変数を埋め込む
const name = "花子";
const age = 30;
const city = "東京";
const profile = `名前: ${name}, 年齢: ${age}歳, 居住地: ${city}`;
console.log(profile);

// 式の評価
const price = 100;
const quantity = 3;
const total = `価格: ${price}円 × 数量: ${quantity} = 合計: ${price * quantity}円`;
console.log(total);

// 複数行の文字列
const email = `
件名: お問い合わせ

こんにちは、

お問い合わせ内容です。

よろしくお願いします。
`;
console.log(email);

// 実践例: HTMLテンプレート
const html = `
<div class="user-card">
    <h2>${name}</h2>
    <p>年齢: ${age}歳</p>
    <p>居住地: ${city}</p>
</div>
`;
console.log(html);
```

---

## まとめ

この章では、TypeScriptの文法・変数の基礎について学びました。

### 学んだこと
- リテラル（文字列、数値、真偽値など）
- エスケープシーケンス
- 変数（let）と定数（const）
- 変数の命名規則
- コメントとデバッグ
- TypeScriptとJavaScriptの関係
- エディタ補完
- テンプレートリテラル

### 重要なポイント
1. **リテラル**: コード内に直接記述される値
2. **let**: 変更可能な変数
3. **const**: 変更不可な定数
4. **命名規則**: 意味が分かりやすい名前を付ける
5. **テンプレートリテラル**: 変数を埋め込んだ文字列

### 次のステップ
次の章では、型システムの基礎について詳しく学びます。

---

## 演習問題

### 問題1: 変数の宣言
`let`を使って、名前（文字列）と年齢（数値）の変数を宣言してください。

<details>
<summary>解答例</summary>

```typescript
let name: string = "太郎";
let age: number = 25;

console.log(`名前: ${name}, 年齢: ${age}歳`);
```
</details>

### 問題2: 定数の宣言
`const`を使って、円周率（3.14159）を定数として宣言してください。

<details>
<summary>解答例</summary>

```typescript
const PI = 3.14159;
console.log(`円周率: ${PI}`);
```
</details>

### 問題3: テンプレートリテラル
テンプレートリテラルを使って、名前と年齢を含むメッセージを作成してください。

<details>
<summary>解答例</summary>

```typescript
const name = "太郎";
const age = 25;
const message = `名前: ${name}, 年齢: ${age}歳`;
console.log(message);
```
</details>

### 問題4: エスケープシーケンス
改行を含む文字列を作成し、複数行で表示してください。

<details>
<summary>解答例</summary>

```typescript
const multiline = "1行目\n2行目\n3行目";
console.log(multiline);
```
</details>

### 問題5: 変数の再代入
`let`で変数を宣言し、値を変更してください。

<details>
<summary>解答例</summary>

```typescript
let count = 10;
console.log(`初期値: ${count}`);

count = 20;
console.log(`変更後: ${count}`);

count = count + 5;
console.log(`追加後: ${count}`);
```
</details>

---

お疲れ様でした！次の章に進みましょう。



