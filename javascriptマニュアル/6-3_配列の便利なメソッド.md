# 6-3. 配列の便利なメソッド

この章では、配列を効率的に操作するための便利なメソッドについて学びます。これらのメソッドを理解することで、配列の処理を簡潔に書けるようになります。

---

## 目次

- [配列の便利なメソッド](#配列の便利なメソッド)
- [includes 配列が要素を含むを確認するメソッド](#includes-配列が要素を含むを確認するメソッド)
- [concat 配列を結合するメソッド](#concat-配列を結合するメソッド)
- [sort 配列の要素を並べ替えるメソッド](#sort-配列の要素を並べ替えるメソッド)
- [sort で条件を指定する](#sort-で条件を指定する)
- [reverse 配列の順序を反転するメソッド](#reverse-配列の順序を反転するメソッド)
- [map 各要素を変換し新しい配列を返す](#map-各要素を変換し新しい配列を返す)
- [filter 条件を満たす要素の配列を作る](#filter-条件を満たす要素の配列を作る)
- [reduce 配列の要素を累積する](#reduce-配列の要素を累積する)
- [まとめ](#まとめ)
- [演習問題](#演習問題)

---

## 配列の便利なメソッド

### 配列メソッドとは
配列には、様々な操作を行うための**メソッド**が用意されています。これらのメソッドを使うことで、配列の処理を簡潔に書けます。

### 主な配列メソッドの種類
1. **検索系**: `includes`, `indexOf`, `find`
2. **結合系**: `concat`, `join`
3. **並び替え系**: `sort`, `reverse`
4. **変換系**: `map`, `filter`, `reduce`
5. **操作系**: `push`, `pop`, `shift`, `unshift`

### メソッドの特徴
- **破壊的メソッド**: 元の配列を変更する（`push`, `pop`, `sort`など）
- **非破壊的メソッド**: 元の配列を変更せず、新しい配列や値を返す（`map`, `filter`, `concat`など）

### 実践例: 配列の便利なメソッド

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>配列の便利なメソッド</title>
</head>
<body>
    <h1>配列の便利なメソッド</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        const fruits = ['りんご', 'バナナ', 'オレンジ'];
        
        // 様々なメソッドの例
        results.push('<h2>配列メソッドの例</h2>');
        results.push(`<p>元の配列: [${fruits.join(', ')}]</p>`);
        
        // includes: 要素を含むか確認
        results.push(`<p>includes('りんご'): ${fruits.includes('りんご')}</p>`);
        
        // map: 各要素を変換
        const upperFruits = fruits.map(fruit => fruit.toUpperCase());
        results.push(`<p>map（大文字に変換）: [${upperFruits.join(', ')}]</p>`);
        
        // filter: 条件に合う要素を抽出
        const longFruits = fruits.filter(fruit => fruit.length > 4);
        results.push(`<p>filter（4文字以上）: [${longFruits.join(', ')}]</p>`);
        
        results.push('<p>配列メソッドを使うことで、処理を簡潔に書けます</p>');
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 配列の便利なメソッド ===');
        console.log('配列には様々な操作を行うメソッドが用意されています');
    </script>
</body>
</html>
```

---

## includes 配列が要素を含むを確認するメソッド

`includes`メソッドは、配列が指定した要素を含んでいるかどうかを確認します。

### includesの基本

```javascript
const fruits = ['りんご', 'バナナ', 'オレンジ'];

console.log(fruits.includes('りんご')); // true
console.log(fruits.includes('ぶどう')); // false
```

### includesの特徴
1. **真偽値を返す**: 含まれていれば`true`、含まれていなければ`false`
2. **厳密等価**: `===`で比較される
3. **開始位置の指定**: 第2引数で検索開始位置を指定できる

### includesの使い方

```javascript
const arr = [1, 2, 3, 4, 5];

// 基本的な使い方
console.log(arr.includes(3)); // true
console.log(arr.includes(6)); // false

// 開始位置を指定
console.log(arr.includes(2, 2)); // false（インデックス2から検索）
```

### 実践例: includesの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>includes 配列が要素を含むを確認するメソッド</title>
</head>
<body>
    <h1>includes - 配列が要素を含むを確認するメソッド</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        const fruits = ['りんご', 'バナナ', 'オレンジ'];
        
        // 基本的なincludes
        results.push('<h2>基本的なincludes</h2>');
        results.push(`<p>配列: [${fruits.join(', ')}]</p>`);
        results.push(`<p>includes('りんご'): ${fruits.includes('りんご')}</p>`);
        results.push(`<p>includes('バナナ'): ${fruits.includes('バナナ')}</p>`);
        results.push(`<p>includes('ぶどう'): ${fruits.includes('ぶどう')}</p>`);
        
        // 数値の配列
        results.push('<h2>数値の配列</h2>');
        
        const numbers = [1, 2, 3, 4, 5];
        results.push(`<p>配列: [${numbers.join(', ')}]</p>`);
        results.push(`<p>includes(3): ${numbers.includes(3)}</p>`);
        results.push(`<p>includes(6): ${numbers.includes(6)}</p>`);
        
        // 開始位置を指定
        results.push('<h2>開始位置を指定</h2>');
        
        const arr = [1, 2, 3, 2, 4];
        results.push(`<p>配列: [${arr.join(', ')}]</p>`);
        results.push(`<p>includes(2): ${arr.includes(2)}（最初から検索）</p>`);
        results.push(`<p>includes(2, 2): ${arr.includes(2, 2)}（インデックス2から検索）</p>`);
        
        // 実践例: 許可リストの確認
        results.push('<h2>実践例: 許可リストの確認</h2>');
        
        const allowedUsers = ['太郎', '花子', '次郎'];
        const userName = '太郎';
        
        if (allowedUsers.includes(userName)) {
            results.push(`<p>✓ ${userName}はアクセス可能です</p>`);
        } else {
            results.push(`<p>✗ ${userName}はアクセスできません</p>`);
        }
        
        // 実践例: 重複チェック
        results.push('<h2>実践例: 重複チェック</h2>');
        
        function addIfNotExists(arr, item) {
            if (!arr.includes(item)) {
                arr.push(item);
                return true;
            }
            return false;
        }
        
        const list = ['りんご', 'バナナ'];
        results.push(`<p>元のリスト: [${list.join(', ')}]</p>`);
        
        addIfNotExists(list, 'オレンジ');
        results.push(`<p>'オレンジ'を追加: [${list.join(', ')}]</p>`);
        
        addIfNotExists(list, 'りんご');
        results.push(`<p>'りんご'を追加しようとする: [${list.join(', ')}]（追加されない）</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== includes ===');
        console.log('includesメソッドで配列が要素を含むか確認できます');
        console.log('真偽値を返すので、条件分岐で使えます');
    </script>
</body>
</html>
```

---

## concat 配列を結合するメソッド

`concat`メソッドは、複数の配列を結合して新しい配列を作成します。

### concatの基本

```javascript
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const combined = arr1.concat(arr2);
console.log(combined); // [1, 2, 3, 4, 5, 6]
```

### concatの特徴
1. **非破壊的**: 元の配列を変更しない
2. **複数の配列を結合**: 複数の引数を渡せる
3. **新しい配列を返す**: 結合した新しい配列が返される

### concatの使い方

```javascript
const arr1 = [1, 2];
const arr2 = [3, 4];
const arr3 = [5, 6];

// 2つの配列を結合
const combined1 = arr1.concat(arr2);
console.log(combined1); // [1, 2, 3, 4]

// 複数の配列を結合
const combined2 = arr1.concat(arr2, arr3);
console.log(combined2); // [1, 2, 3, 4, 5, 6]

// 値も結合できる
const combined3 = arr1.concat(7, 8);
console.log(combined3); // [1, 2, 7, 8]
```

### スプレッド構文との比較

```javascript
const arr1 = [1, 2];
const arr2 = [3, 4];

// concat
const combined1 = arr1.concat(arr2);

// スプレッド構文（推奨）
const combined2 = [...arr1, ...arr2];
```

### 実践例: concatの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>concat 配列を結合するメソッド</title>
</head>
<body>
    <h1>concat - 配列を結合するメソッド</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 基本的なconcat
        results.push('<h2>基本的なconcat</h2>');
        
        const arr1 = [1, 2, 3];
        const arr2 = [4, 5, 6];
        const combined = arr1.concat(arr2);
        
        results.push(`<p>arr1: [${arr1.join(', ')}]</p>`);
        results.push(`<p>arr2: [${arr2.join(', ')}]</p>`);
        results.push(`<p>結合後: [${combined.join(', ')}]</p>`);
        results.push(`<p>arr1は変更されない: [${arr1.join(', ')}]</p>`);
        
        // 複数の配列を結合
        results.push('<h2>複数の配列を結合</h2>');
        
        const arr3 = [7, 8];
        const combined2 = arr1.concat(arr2, arr3);
        
        results.push(`<p>arr1.concat(arr2, arr3): [${combined2.join(', ')}]</p>`);
        
        // 値も結合できる
        results.push('<h2>値も結合できる</h2>');
        
        const combined3 = arr1.concat(7, 8, 9);
        results.push(`<p>arr1.concat(7, 8, 9): [${combined3.join(', ')}]</p>`);
        
        // スプレッド構文との比較
        results.push('<h2>スプレッド構文との比較</h2>');
        
        const concatResult = arr1.concat(arr2);
        const spreadResult = [...arr1, ...arr2];
        
        results.push(`<p>concat: [${concatResult.join(', ')}]</p>`);
        results.push(`<p>スプレッド構文: [${spreadResult.join(', ')}]</p>`);
        results.push('<p>どちらも同じ結果ですが、スプレッド構文が推奨されます</p>');
        
        // 実践例: リストの結合
        results.push('<h2>実践例: リストの結合</h2>');
        
        const fruits1 = ['りんご', 'バナナ'];
        const fruits2 = ['オレンジ', 'ぶどう'];
        const allFruits = fruits1.concat(fruits2);
        
        results.push(`<p>フルーツリスト1: [${fruits1.join(', ')}]</p>`);
        results.push(`<p>フルーツリスト2: [${fruits2.join(', ')}]</p>`);
        results.push(`<p>結合後: [${allFruits.join(', ')}]</p>`);
        
        // 実践例: データのマージ
        results.push('<h2>実践例: データのマージ</h2>');
        
        const scores1 = [85, 90, 78];
        const scores2 = [92, 88, 95];
        const allScores = scores1.concat(scores2);
        
        results.push(`<p>点数1: [${scores1.join(', ')}]</p>`);
        results.push(`<p>点数2: [${scores2.join(', ')}]</p>`);
        results.push(`<p>すべての点数: [${allScores.join(', ')}]</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== concat ===');
        console.log('concatメソッドで配列を結合できます');
        console.log('元の配列は変更されません（非破壊的）');
    </script>
</body>
</html>
```

---

## sort 配列の要素を並べ替えるメソッド

`sort`メソッドは、配列の要素を並べ替えます。

### sortの基本

```javascript
const fruits = ['オレンジ', 'りんご', 'バナナ'];
fruits.sort();
console.log(fruits); // ['オレンジ', 'バナナ', 'りんご']（辞書順）
```

### sortの特徴
1. **破壊的メソッド**: 元の配列を変更する
2. **デフォルトは文字列として比較**: 数値の場合は注意が必要
3. **比較関数を指定可能**: カスタムの並び替えができる

### sortの使い方

```javascript
// 文字列の並び替え
const fruits = ['オレンジ', 'りんご', 'バナナ'];
fruits.sort();
console.log(fruits); // ['オレンジ', 'バナナ', 'りんご']

// 数値の並び替え（注意が必要）
const numbers = [10, 2, 5, 1];
numbers.sort();
console.log(numbers); // [1, 10, 2, 5]（文字列として比較される）
```

### 実践例: sortの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>sort 配列の要素を並べ替えるメソッド</title>
</head>
<body>
    <h1>sort - 配列の要素を並べ替えるメソッド</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 文字列の並び替え
        results.push('<h2>文字列の並び替え</h2>');
        
        const fruits = ['オレンジ', 'りんご', 'バナナ'];
        results.push(`<p>元の配列: [${fruits.join(', ')}]</p>`);
        
        fruits.sort();
        results.push(`<p>sort後: [${fruits.join(', ')}]（辞書順）</p>`);
        
        // 数値の並び替え（問題のある例）
        results.push('<h2>数値の並び替え（問題のある例）</h2>');
        
        const numbers1 = [10, 2, 5, 1];
        results.push(`<p>元の配列: [${numbers1.join(', ')}]</p>`);
        
        numbers1.sort();
        results.push(`<p>sort後: [${numbers1.join(', ')}]（文字列として比較される）</p>`);
        results.push('<p>数値の場合は、比較関数を指定する必要があります</p>');
        
        // 数値の並び替え（正しい方法）
        results.push('<h2>数値の並び替え（正しい方法）</h2>');
        
        const numbers2 = [10, 2, 5, 1];
        results.push(`<p>元の配列: [${numbers2.join(', ')}]</p>`);
        
        numbers2.sort((a, b) => a - b);  // 昇順
        results.push(`<p>昇順sort: [${numbers2.join(', ')}]</p>`);
        
        numbers2.sort((a, b) => b - a);  // 降順
        results.push(`<p>降順sort: [${numbers2.join(', ')}]</p>`);
        
        // 実践例: 名前の並び替え
        results.push('<h2>実践例: 名前の並び替え</h2>');
        
        const names = ['花子', '太郎', '次郎'];
        results.push(`<p>元の配列: [${names.join(', ')}]</p>`);
        
        names.sort();
        results.push(`<p>sort後: [${names.join(', ')}]（五十音順）</p>`);
        
        // 実践例: スコアの並び替え
        results.push('<h2>実践例: スコアの並び替え</h2>');
        
        const scores = [85, 90, 78, 92, 88];
        results.push(`<p>元の配列: [${scores.join(', ')}]</p>`);
        
        scores.sort((a, b) => b - a);  // 降順（高い順）
        results.push(`<p>降順sort: [${scores.join(', ')}]</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== sort ===');
        console.log('sortメソッドで配列を並び替えられます');
        console.log('数値の場合は比較関数を指定する必要があります');
    </script>
</body>
</html>
```

---

## sort で条件を指定する

`sort`メソッドに比較関数を渡すことで、カスタムの並び替えができます。

### 比較関数の基本

```javascript
配列.sort((a, b) => {
    // a < b の場合、負の値を返す → aが前に
    // a > b の場合、正の値を返す → bが前に
    // a === b の場合、0を返す → 順序を変えない
    return a - b;  // 昇順
});
```

### 比較関数の例

```javascript
// 昇順（小さい順）
numbers.sort((a, b) => a - b);

// 降順（大きい順）
numbers.sort((a, b) => b - a);

// 文字列の長さで並び替え
strings.sort((a, b) => a.length - b.length);
```

### 実践例: sortで条件を指定する

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>sort で条件を指定する</title>
</head>
<body>
    <h1>sort - で条件を指定する</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 数値の昇順
        results.push('<h2>数値の昇順</h2>');
        
        const numbers1 = [10, 2, 5, 1, 8];
        results.push(`<p>元の配列: [${numbers1.join(', ')}]</p>`);
        
        numbers1.sort((a, b) => a - b);
        results.push(`<p>昇順sort: [${numbers1.join(', ')}]</p>`);
        
        // 数値の降順
        results.push('<h2>数値の降順</h2>');
        
        const numbers2 = [10, 2, 5, 1, 8];
        results.push(`<p>元の配列: [${numbers2.join(', ')}]</p>`);
        
        numbers2.sort((a, b) => b - a);
        results.push(`<p>降順sort: [${numbers2.join(', ')}]</p>`);
        
        // 文字列の長さで並び替え
        results.push('<h2>文字列の長さで並び替え</h2>');
        
        const words = ['りんご', 'バナナ', 'オレンジ', 'ぶどう'];
        results.push(`<p>元の配列: [${words.join(', ')}]</p>`);
        
        words.sort((a, b) => a.length - b.length);
        results.push(`<p>短い順sort: [${words.join(', ')}]</p>`);
        
        words.sort((a, b) => b.length - a.length);
        results.push(`<p>長い順sort: [${words.join(', ')}]</p>`);
        
        // オブジェクトの配列を並び替え
        results.push('<h2>オブジェクトの配列を並び替え</h2>');
        
        const students = [
            { name: '太郎', score: 85 },
            { name: '花子', score: 92 },
            { name: '次郎', score: 78 }
        ];
        
        results.push('<p>元の配列:</p>');
        results.push('<ul>');
        students.forEach(student => {
            results.push(`<li>${student.name}: ${student.score}点</li>`);
        });
        results.push('</ul>');
        
        // スコアで並び替え（降順）
        students.sort((a, b) => b.score - a.score);
        
        results.push('<p>スコアの高い順:</p>');
        results.push('<ul>');
        students.forEach(student => {
            results.push(`<li>${student.name}: ${student.score}点</li>`);
        });
        results.push('</ul>');
        
        // 実践例: 複数条件での並び替え
        results.push('<h2>実践例: 複数条件での並び替え</h2>');
        
        const products = [
            { name: '商品A', price: 1000, stock: 5 },
            { name: '商品B', price: 500, stock: 10 },
            { name: '商品C', price: 1000, stock: 3 }
        ];
        
        // 価格で並び替え、同じ価格の場合は在庫数で並び替え
        products.sort((a, b) => {
            if (a.price !== b.price) {
                return a.price - b.price;  // 価格で並び替え
            }
            return a.stock - b.stock;  // 在庫数で並び替え
        });
        
        results.push('<p>価格順（同じ価格の場合は在庫数順）:</p>');
        results.push('<ul>');
        products.forEach(product => {
            results.push(`<li>${product.name}: ${product.price}円（在庫: ${product.stock}）</li>`);
        });
        results.push('</ul>');
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== sortで条件を指定する ===');
        console.log('比較関数を指定することで、カスタムの並び替えができます');
        console.log('複数の条件で並び替えることも可能です');
    </script>
</body>
</html>
```

---

## reverse 配列の順序を反転するメソッド

`reverse`メソッドは、配列の要素の順序を反転します。

### reverseの基本

```javascript
const fruits = ['りんご', 'バナナ', 'オレンジ'];
fruits.reverse();
console.log(fruits); // ['オレンジ', 'バナナ', 'りんご']
```

### reverseの特徴
1. **破壊的メソッド**: 元の配列を変更する
2. **順序を反転**: 最初の要素が最後に、最後の要素が最初になる
3. **戻り値**: 反転された配列を返す（元の配列と同じ参照）

### reverseの使い方

```javascript
const arr = [1, 2, 3, 4, 5];
arr.reverse();
console.log(arr); // [5, 4, 3, 2, 1]
```

### 実践例: reverseの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>reverse 配列の順序を反転するメソッド</title>
</head>
<body>
    <h1>reverse - 配列の順序を反転するメソッド</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 基本的なreverse
        results.push('<h2>基本的なreverse</h2>');
        
        const fruits = ['りんご', 'バナナ', 'オレンジ'];
        results.push(`<p>元の配列: [${fruits.join(', ')}]</p>`);
        
        fruits.reverse();
        results.push(`<p>reverse後: [${fruits.join(', ')}]</p>`);
        
        // 数値の配列
        results.push('<h2>数値の配列</h2>');
        
        const numbers = [1, 2, 3, 4, 5];
        results.push(`<p>元の配列: [${numbers.join(', ')}]</p>`);
        
        numbers.reverse();
        results.push(`<p>reverse後: [${numbers.join(', ')}]</p>`);
        
        // 実践例: 降順に並び替え
        results.push('<h2>実践例: 降順に並び替え</h2>');
        
        const scores = [85, 90, 78, 92, 88];
        results.push(`<p>元の配列: [${scores.join(', ')}]</p>`);
        
        scores.sort((a, b) => a - b);  // 昇順
        results.push(`<p>昇順sort: [${scores.join(', ')}]</p>`);
        
        scores.reverse();  // 降順
        results.push(`<p>reverse後: [${scores.join(', ')}]（降順）</p>`);
        
        // 実践例: スタックの実装
        results.push('<h2>実践例: スタックの実装</h2>');
        
        const stack = [1, 2, 3];
        results.push(`<p>スタック: [${stack.join(', ')}]</p>`);
        
        stack.reverse();
        results.push(`<p>reverse後: [${stack.join(', ')}]</p>`);
        results.push('<p>スタックの順序を反転できます</p>');
        
        // 非破壊的にreverse（スプレッド構文）
        results.push('<h2>非破壊的にreverse（スプレッド構文）</h2>');
        
        const original = [1, 2, 3, 4, 5];
        const reversed = [...original].reverse();
        
        results.push(`<p>元の配列: [${original.join(', ')}]（変更されない）</p>`);
        results.push(`<p>反転した配列: [${reversed.join(', ')}]</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== reverse ===');
        console.log('reverseメソッドで配列の順序を反転できます');
        console.log('元の配列が変更されます（破壊的メソッド）');
    </script>
</body>
</html>
```

---

## map 各要素を変換し新しい配列を返す

`map`メソッドは、配列の各要素を変換して、新しい配列を返します。

### mapの基本

```javascript
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(n => n * 2);
console.log(doubled); // [2, 4, 6, 8, 10]
```

### mapの特徴
1. **非破壊的**: 元の配列を変更しない
2. **新しい配列を返す**: 変換後の新しい配列が返される
3. **各要素を変換**: すべての要素に対して関数を実行

### mapの使い方

```javascript
const arr = [1, 2, 3];

// 各要素を2倍にする
const doubled = arr.map(n => n * 2);

// 文字列に変換
const strings = arr.map(n => String(n));

// オブジェクトを変換
const users = [
    { name: '太郎', age: 25 },
    { name: '花子', age: 30 }
];
const names = users.map(user => user.name);
```

### 実践例: mapの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>map 各要素を変換し新しい配列を返す</title>
</head>
<body>
    <h1>map - 各要素を変換し新しい配列を返す</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 基本的なmap
        results.push('<h2>基本的なmap</h2>');
        
        const numbers = [1, 2, 3, 4, 5];
        results.push(`<p>元の配列: [${numbers.join(', ')}]</p>`);
        
        const doubled = numbers.map(n => n * 2);
        results.push(`<p>2倍にした配列: [${doubled.join(', ')}]</p>`);
        results.push(`<p>元の配列は変更されない: [${numbers.join(', ')}]</p>`);
        
        // 文字列の変換
        results.push('<h2>文字列の変換</h2>');
        
        const fruits = ['りんご', 'バナナ', 'オレンジ'];
        const upperFruits = fruits.map(fruit => fruit.toUpperCase());
        
        results.push(`<p>元の配列: [${fruits.join(', ')}]</p>`);
        results.push(`<p>大文字に変換: [${upperFruits.join(', ')}]</p>`);
        
        // オブジェクトの変換
        results.push('<h2>オブジェクトの変換</h2>');
        
        const users = [
            { name: '太郎', age: 25 },
            { name: '花子', age: 30 },
            { name: '次郎', age: 20 }
        ];
        
        const names = users.map(user => user.name);
        const ages = users.map(user => user.age);
        
        results.push(`<p>名前の配列: [${names.join(', ')}]</p>`);
        results.push(`<p>年齢の配列: [${ages.join(', ')}]</p>`);
        
        // 実践例: スコアの変換
        results.push('<h2>実践例: スコアの変換</h2>');
        
        const scores = [85, 90, 78, 92, 88];
        const grades = scores.map(score => {
            if (score >= 90) return 'A';
            if (score >= 80) return 'B';
            if (score >= 70) return 'C';
            return 'D';
        });
        
        results.push(`<p>点数: [${scores.join(', ')}]</p>`);
        results.push(`<p>評価: [${grades.join(', ')}]</p>`);
        
        // 実践例: オブジェクトの作成
        results.push('<h2>実践例: オブジェクトの作成</h2>');
        
        const numbers2 = [1, 2, 3, 4, 5];
        const objects = numbers2.map((n, index) => ({
            value: n,
            index: index,
            doubled: n * 2
        }));
        
        results.push('<p>オブジェクトの配列:</p>');
        results.push('<ul>');
        objects.forEach(obj => {
            results.push(`<li>値: ${obj.value}, インデックス: ${obj.index}, 2倍: ${obj.doubled}</li>`);
        });
        results.push('</ul>');
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== map ===');
        console.log('mapメソッドで各要素を変換して新しい配列を作成できます');
        console.log('元の配列は変更されません（非破壊的）');
    </script>
</body>
</html>
```

---

## filter 条件を満たす要素の配列を作る

`filter`メソッドは、条件を満たす要素だけを抽出して、新しい配列を作成します。

### filterの基本

```javascript
const numbers = [1, 2, 3, 4, 5];
const evens = numbers.filter(n => n % 2 === 0);
console.log(evens); // [2, 4]
```

### filterの特徴
1. **非破壊的**: 元の配列を変更しない
2. **条件でフィルタリング**: 条件を満たす要素だけを抽出
3. **新しい配列を返す**: フィルタリング後の新しい配列が返される

### filterの使い方

```javascript
const arr = [1, 2, 3, 4, 5, 6];

// 偶数だけを抽出
const evens = arr.filter(n => n % 2 === 0);

// 5より大きい数を抽出
const large = arr.filter(n => n > 5);

// 文字列の長さでフィルタリング
const words = ['りんご', 'バナナ', 'オレンジ'];
const longWords = words.filter(word => word.length > 4);
```

### 実践例: filterの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>filter 条件を満たす要素の配列を作る</title>
</head>
<body>
    <h1>filter - 条件を満たす要素の配列を作る</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 基本的なfilter
        results.push('<h2>基本的なfilter</h2>');
        
        const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        results.push(`<p>元の配列: [${numbers.join(', ')}]</p>`);
        
        const evens = numbers.filter(n => n % 2 === 0);
        results.push(`<p>偶数だけ: [${evens.join(', ')}]</p>`);
        
        const odds = numbers.filter(n => n % 2 !== 0);
        results.push(`<p>奇数だけ: [${odds.join(', ')}]</p>`);
        
        // 数値のフィルタリング
        results.push('<h2>数値のフィルタリング</h2>');
        
        const scores = [85, 90, 45, 78, 92, 55, 88];
        results.push(`<p>元の配列: [${scores.join(', ')}]</p>`);
        
        const passed = scores.filter(score => score >= 60);
        results.push(`<p>60点以上: [${passed.join(', ')}]</p>`);
        
        const highScores = scores.filter(score => score >= 80);
        results.push(`<p>80点以上: [${highScores.join(', ')}]</p>`);
        
        // 文字列のフィルタリング
        results.push('<h2>文字列のフィルタリング</h2>');
        
        const fruits = ['りんご', 'バナナ', 'オレンジ', 'ぶどう', 'みかん'];
        results.push(`<p>元の配列: [${fruits.join(', ')}]</p>`);
        
        const longFruits = fruits.filter(fruit => fruit.length > 4);
        results.push(`<p>4文字以上: [${longFruits.join(', ')}]</p>`);
        
        // オブジェクトのフィルタリング
        results.push('<h2>オブジェクトのフィルタリング</h2>');
        
        const users = [
            { name: '太郎', age: 25, city: '東京' },
            { name: '花子', age: 30, city: '大阪' },
            { name: '次郎', age: 20, city: '東京' },
            { name: '三郎', age: 35, city: '名古屋' }
        ];
        
        const adults = users.filter(user => user.age >= 20);
        results.push(`<p>20歳以上: ${adults.length}人</p>`);
        
        const tokyoUsers = users.filter(user => user.city === '東京');
        results.push(`<p>東京在住: ${tokyoUsers.length}人</p>`);
        
        // 実践例: 複数条件でのフィルタリング
        results.push('<h2>実践例: 複数条件でのフィルタリング</h2>');
        
        const products = [
            { name: '商品A', price: 1000, stock: 5 },
            { name: '商品B', price: 500, stock: 0 },
            { name: '商品C', price: 1500, stock: 10 },
            { name: '商品D', price: 800, stock: 3 }
        ];
        
        const availableProducts = products.filter(product => 
            product.price <= 1000 && product.stock > 0
        );
        
        results.push('<p>1000円以下で在庫ありの商品:</p>');
        results.push('<ul>');
        availableProducts.forEach(product => {
            results.push(`<li>${product.name}: ${product.price}円（在庫: ${product.stock}）</li>`);
        });
        results.push('</ul>');
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== filter ===');
        console.log('filterメソッドで条件を満たす要素だけを抽出できます');
        console.log('元の配列は変更されません（非破壊的）');
    </script>
</body>
</html>
```

---

## reduce 配列の要素を累積する

`reduce`メソッドは、配列の要素を1つの値に集約（累積）します。

### reduceの基本

```javascript
const numbers = [1, 2, 3, 4, 5];
const sum = numbers.reduce((acc, current) => acc + current, 0);
console.log(sum); // 15
```

### reduceの特徴
1. **累積処理**: 配列を1つの値に集約
2. **初期値**: 第2引数で初期値を指定できる
3. **柔軟な処理**: 合計、最大値、最小値、グループ化など様々な処理が可能

### reduceの構文

```javascript
配列.reduce((累積値, 現在の値, インデックス, 配列) => {
    return 新しい累積値;
}, 初期値);
```

### reduceの使い方

```javascript
const arr = [1, 2, 3, 4, 5];

// 合計を計算
const sum = arr.reduce((acc, n) => acc + n, 0);

// 最大値を求める
const max = arr.reduce((acc, n) => n > acc ? n : acc, arr[0]);

// 最小値を求める
const min = arr.reduce((acc, n) => n < acc ? n : acc, arr[0]);
```

### 実践例: reduceの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>reduce 配列の要素を累積する</title>
</head>
<body>
    <h1>reduce - 配列の要素を累積する</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 基本的なreduce（合計）
        results.push('<h2>基本的なreduce（合計）</h2>');
        
        const numbers = [1, 2, 3, 4, 5];
        results.push(`<p>配列: [${numbers.join(', ')}]</p>`);
        
        const sum = numbers.reduce((acc, n) => acc + n, 0);
        results.push(`<p>合計: ${sum}</p>`);
        
        // 最大値を求める
        results.push('<h2>最大値を求める</h2>');
        
        const scores = [85, 90, 78, 92, 88];
        results.push(`<p>配列: [${scores.join(', ')}]</p>`);
        
        const max = scores.reduce((acc, score) => score > acc ? score : acc, scores[0]);
        results.push(`<p>最大値: ${max}</p>`);
        
        // 最小値を求める
        results.push('<h2>最小値を求める</h2>');
        
        const min = scores.reduce((acc, score) => score < acc ? score : acc, scores[0]);
        results.push(`<p>最小値: ${min}</p>`);
        
        // 文字列の結合
        results.push('<h2>文字列の結合</h2>');
        
        const words = ['Hello', 'World', 'JavaScript'];
        const sentence = words.reduce((acc, word) => acc + ' ' + word, '');
        results.push(`<p>配列: [${words.join(', ')}]</p>`);
        results.push(`<p>結合後: "${sentence.trim()}"</p>`);
        
        // 実践例: オブジェクトの集計
        results.push('<h2>実践例: オブジェクトの集計</h2>');
        
        const items = [
            { name: 'りんご', price: 100, quantity: 3 },
            { name: 'バナナ', price: 150, quantity: 2 },
            { name: 'オレンジ', price: 120, quantity: 4 }
        ];
        
        const total = items.reduce((acc, item) => {
            return acc + (item.price * item.quantity);
        }, 0);
        
        results.push(`<p>合計金額: ${total}円</p>`);
        
        // 実践例: グループ化
        results.push('<h2>実践例: グループ化</h2>');
        
        const students = [
            { name: '太郎', grade: 'A' },
            { name: '花子', grade: 'B' },
            { name: '次郎', grade: 'A' },
            { name: '三郎', grade: 'C' },
            { name: '四郎', grade: 'B' }
        ];
        
        const grouped = students.reduce((acc, student) => {
            if (!acc[student.grade]) {
                acc[student.grade] = [];
            }
            acc[student.grade].push(student.name);
            return acc;
        }, {});
        
        results.push('<p>評価別のグループ化:</p>');
        for (const grade in grouped) {
            results.push(`<p>${grade}: [${grouped[grade].join(', ')}]</p>`);
        }
        
        // 実践例: 平均値の計算
        results.push('<h2>実践例: 平均値の計算</h2>');
        
        const scores2 = [85, 90, 78, 92, 88];
        const average = scores2.reduce((acc, score) => acc + score, 0) / scores2.length;
        
        results.push(`<p>点数: [${scores2.join(', ')}]</p>`);
        results.push(`<p>平均: ${average.toFixed(1)}点</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== reduce ===');
        console.log('reduceメソッドで配列を1つの値に集約できます');
        console.log('合計、最大値、最小値、グループ化など様々な処理が可能です');
    </script>
</body>
</html>
```

---

## まとめ

この章では、配列の便利なメソッドについて学びました。

### 学んだこと
- `includes`: 配列が要素を含むか確認
- `concat`: 配列を結合
- `sort`: 配列を並び替え
- `reverse`: 配列の順序を反転
- `map`: 各要素を変換
- `filter`: 条件を満たす要素を抽出
- `reduce`: 配列を1つの値に集約

### 重要なポイント
1. **非破壊的メソッド**: `map`, `filter`, `concat`などは元の配列を変更しない
2. **破壊的メソッド**: `sort`, `reverse`などは元の配列を変更する
3. **メソッドのチェーン**: 複数のメソッドを連続して呼び出せる
4. **高階関数**: `map`, `filter`, `reduce`は関数を引数として受け取る

### 次のステップ
次の章では、クラス・モジュールについて詳しく学びます。

---

## 演習問題

### 問題1: includes
配列`['りんご', 'バナナ', 'オレンジ']`に`'バナナ'`が含まれているか確認してください。

<details>
<summary>解答例</summary>

```javascript
const fruits = ['りんご', 'バナナ', 'オレンジ'];
console.log(fruits.includes('バナナ')); // true
```
</details>

### 問題2: map
配列`[1, 2, 3, 4, 5]`の各要素を2倍にした新しい配列を作成してください。

<details>
<summary>解答例</summary>

```javascript
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(n => n * 2);
console.log(doubled); // [2, 4, 6, 8, 10]
```
</details>

### 問題3: filter
配列`[85, 90, 45, 78, 92, 55]`から、60点以上の要素だけを抽出してください。

<details>
<summary>解答例</summary>

```javascript
const scores = [85, 90, 45, 78, 92, 55];
const passed = scores.filter(score => score >= 60);
console.log(passed); // [85, 90, 78, 92]
```
</details>

### 問題4: reduce
配列`[1, 2, 3, 4, 5]`の合計を計算してください。

<details>
<summary>解答例</summary>

```javascript
const numbers = [1, 2, 3, 4, 5];
const sum = numbers.reduce((acc, n) => acc + n, 0);
console.log(sum); // 15
```
</details>

### 問題5: sort
配列`[10, 2, 5, 1, 8]`を数値として昇順に並び替えてください。

<details>
<summary>解答例</summary>

```javascript
const numbers = [10, 2, 5, 1, 8];
numbers.sort((a, b) => a - b);
console.log(numbers); // [1, 2, 5, 8, 10]
```
</details>

---

お疲れ様でした！次の章に進みましょう。



