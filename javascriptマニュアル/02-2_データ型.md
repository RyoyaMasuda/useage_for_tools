# 2-2. データ型

この章では、JavaScriptで扱うデータの種類（データ型）について学びます。データ型を理解することで、正しい操作を行い、エラーを防ぐことができます。

---

## 目次

- [データ型（前編）- プリミティブ型](#データ型前編---プリミティブ型)
- [データ型の種類](#データ型の種類)
- [動的型付け言語と静的型付け言語](#動的型付け言語と静的型付け言語)
- [文字列型（String）](#文字列型string)
- [数値型（Number）](#数値型number)
- [真偽値（Boolean）](#真偽値boolean)
- [null](#null)
- [undefined](#undefined)
- [データ型の確認方法](#データ型の確認方法)
- [型変換](#型変換)
- [まとめ](#まとめ)
- [演習問題](#演習問題)

---

## データ型（前編）- プリミティブ型

### データ型とは
データ型（data type）は、データの種類を表すものです。JavaScriptでは、データの種類によって使える操作が異なります。

### プリミティブ型とは
プリミティブ型（primitive type）は、**基本的なデータ型**です。これらは「値そのもの」として扱われます。

### プリミティブ型の種類
1. **文字列型（String）**: テキストデータ
2. **数値型（Number）**: 数値データ
3. **真偽値（Boolean）**: `true`または`false`
4. **null**: 値が存在しないことを明示的に示す
5. **undefined**: 値が定義されていない
6. **シンボル（Symbol）**: 一意の識別子（上級者向け）

### プリミティブ型の特徴
- **イミュータブル（不変）**: 一度作成した値は変更できない
- **値のコピー**: 変数に代入すると、値そのものがコピーされる

```javascript
// プリミティブ型の例
const name = '太郎';        // 文字列型
const age = 25;             // 数値型
const isActive = true;      // 真偽値
const nothing = null;       // null
let undefinedValue;         // undefined

console.log(typeof name);        // "string"
console.log(typeof age);         // "number"
console.log(typeof isActive);    // "boolean"
console.log(typeof nothing);     // "object"（注意: nullは特殊）
console.log(typeof undefinedValue); // "undefined"
```

### 実践例: プリミティブ型の確認

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>プリミティブ型</title>
</head>
<body>
    <h1>プリミティブ型の確認</h1>
    <div id="output"></div>
    
    <script>
        // プリミティブ型の例
        const stringValue = 'Hello, World!';  // 文字列型
        const numberValue = 42;             // 数値型
        const booleanValue = true;          // 真偽値
        const nullValue = null;             // null
        let undefinedValue;                 // undefined
        
        const output = document.getElementById('output');
        
        // 各データ型の情報を表示
        output.innerHTML = `
            <h2>プリミティブ型の例</h2>
            <p><strong>文字列型:</strong> ${stringValue} (型: ${typeof stringValue})</p>
            <p><strong>数値型:</strong> ${numberValue} (型: ${typeof numberValue})</p>
            <p><strong>真偽値:</strong> ${booleanValue} (型: ${typeof booleanValue})</p>
            <p><strong>null:</strong> ${nullValue} (型: ${typeof nullValue})</p>
            <p><strong>undefined:</strong> ${undefinedValue} (型: ${typeof undefinedValue})</p>
        `;
        
        // コンソールで確認
        console.log('=== プリミティブ型 ===');
        console.log('文字列:', stringValue, typeof stringValue);
        console.log('数値:', numberValue, typeof numberValue);
        console.log('真偽値:', booleanValue, typeof booleanValue);
        console.log('null:', nullValue, typeof nullValue);
        console.log('undefined:', undefinedValue, typeof undefinedValue);
    </script>
</body>
</html>
```

---

## データ型の種類

JavaScriptのデータ型は、大きく分けて2つに分類されます。

### 1. プリミティブ型（基本型）
値そのものを直接保存する型です。

| 型 | 説明 | 例 |
|---|------|---|
| **String** | 文字列 | `'Hello'`, `"World"` |
| **Number** | 数値 | `42`, `3.14`, `-10` |
| **Boolean** | 真偽値 | `true`, `false` |
| **null** | 値が存在しない | `null` |
| **undefined** | 未定義 | `undefined` |
| **Symbol** | 一意の識別子 | `Symbol('id')` |

### 2. オブジェクト型（参照型）
メモリ上の場所（参照）を保存する型です。

| 型 | 説明 | 例 |
|---|------|---|
| **Object** | オブジェクト | `{name: '太郎'}` |
| **Array** | 配列 | `[1, 2, 3]` |
| **Function** | 関数 | `function() {}` |
| **Date** | 日付 | `new Date()` |

### プリミティブ型とオブジェクト型の違い

```javascript
// プリミティブ型: 値そのものがコピーされる
const a = 10;
const b = a;  // 値がコピーされる
b = 20;
console.log(a); // 10（変わらない）
console.log(b); // 20

// オブジェクト型: 参照がコピーされる
const obj1 = { value: 10 };
const obj2 = obj1;  // 参照がコピーされる
obj2.value = 20;
console.log(obj1.value); // 20（変わってしまう！）
console.log(obj2.value); // 20
```

### 実践例: データ型の種類

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>データ型の種類</title>
</head>
<body>
    <h1>データ型の種類</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // ===== プリミティブ型 =====
        results.push('<h2>プリミティブ型（基本型）</h2>');
        
        const str = '文字列';
        const num = 42;
        const bool = true;
        const nul = null;
        let undef;
        
        results.push(`<p>文字列型: ${str} (${typeof str})</p>`);
        results.push(`<p>数値型: ${num} (${typeof num})</p>`);
        results.push(`<p>真偽値: ${bool} (${typeof bool})</p>`);
        results.push(`<p>null: ${nul} (${typeof nul})</p>`);
        results.push(`<p>undefined: ${undef} (${typeof undef})</p>`);
        
        // ===== オブジェクト型 =====
        results.push('<h2>オブジェクト型（参照型）</h2>');
        
        const obj = { name: '太郎' };
        const arr = [1, 2, 3];
        const func = function() { return '関数'; };
        const date = new Date();
        
        results.push(`<p>オブジェクト: ${JSON.stringify(obj)} (${typeof obj})</p>`);
        results.push(`<p>配列: [${arr.join(', ')}] (${typeof arr})</p>`);
        results.push(`<p>関数: ${func()} (${typeof func})</p>`);
        results.push(`<p>日付: ${date} (${typeof date})</p>`);
        
        // ===== コピーの違い =====
        results.push('<h2>プリミティブ型とオブジェクト型のコピーの違い</h2>');
        
        // プリミティブ型のコピー
        let num1 = 10;
        let num2 = num1;
        num2 = 20;
        results.push(`<p>プリミティブ型: num1=${num1}, num2=${num2} (num1は変わらない)</p>`);
        
        // オブジェクト型のコピー
        const obj1 = { value: 10 };
        const obj2 = obj1;
        obj2.value = 20;
        results.push(`<p>オブジェクト型: obj1.value=${obj1.value}, obj2.value=${obj2.value} (obj1も変わる！)</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== データ型の種類 ===');
        console.table({
            '文字列': typeof str,
            '数値': typeof num,
            '真偽値': typeof bool,
            'null': typeof nul,
            'undefined': typeof undef,
            'オブジェクト': typeof obj,
            '配列': typeof arr,
            '関数': typeof func
        });
    </script>
</body>
</html>
```

---

## 動的型付け言語と静的型付け言語

### 動的型付け言語とは
JavaScriptは**動的型付け言語**（dynamically typed language）です。変数の型を事前に宣言する必要がなく、実行時に型が決まります。

### 静的型付け言語とは
**静的型付け言語**（statically typed language）は、変数の型を事前に宣言する必要があります。例: TypeScript, Java, C++

### 動的型付けの特徴

#### メリット
- **柔軟性**: 同じ変数に異なる型の値を代入できる
- **開発速度**: 型宣言が不要で、素早くコードを書ける

#### デメリット
- **実行時エラー**: 型の不一致が実行時まで分からない
- **IDEの補完**: 型が分からないため、補完機能が弱い

### 動的型付けの例

```javascript
// 同じ変数に異なる型の値を代入できる
let value = '文字列';
console.log(typeof value); // "string"

value = 42;
console.log(typeof value); // "number"

value = true;
console.log(typeof value); // "boolean"

value = [1, 2, 3];
console.log(typeof value); // "object"
```

### 静的型付けの例（TypeScript）

```typescript
// TypeScript（静的型付け）の例
let value: string = '文字列';  // 型を明示
// value = 42;  // エラー！文字列型に数値を代入できない
```

### 実践例: 動的型付けの特徴

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>動的型付け言語</title>
</head>
<body>
    <h1>動的型付け言語の特徴</h1>
    <button id="changeBtn">型を変更</button>
    <div id="output"></div>
    
    <script>
        // 動的型付け: 型を宣言しない
        let dynamicValue = '文字列';
        let typeHistory = [];
        
        const changeBtn = document.getElementById('changeBtn');
        const output = document.getElementById('output');
        
        function updateDisplay() {
            const currentType = typeof dynamicValue;
            typeHistory.push({
                value: dynamicValue,
                type: currentType
            });
            
            let html = '<h2>型の変化</h2>';
            typeHistory.forEach((item, index) => {
                html += `<p>${index + 1}. 値: ${item.value}, 型: ${item.type}</p>`;
            });
            
            output.innerHTML = html;
        }
        
        // 初期表示
        updateDisplay();
        
        let changeCount = 0;
        changeBtn.addEventListener('click', function() {
            changeCount++;
            
            // 動的型付け: 同じ変数に異なる型の値を代入
            switch (changeCount % 4) {
                case 0:
                    dynamicValue = '文字列';
                    break;
                case 1:
                    dynamicValue = 42;
                    break;
                case 2:
                    dynamicValue = true;
                    break;
                case 3:
                    dynamicValue = [1, 2, 3];
                    break;
            }
            
            console.log('型が変更されました:', typeof dynamicValue, dynamicValue);
            updateDisplay();
        });
        
        // コンソールで説明
        console.log('=== 動的型付け言語 ===');
        console.log('JavaScriptは動的型付け言語です');
        console.log('変数の型を事前に宣言する必要がありません');
        console.log('同じ変数に異なる型の値を代入できます');
    </script>
</body>
</html>
```

---

## 文字列型（String）

文字列型は、テキストデータを扱うデータ型です。

### 文字列の作成方法

#### 方法1: シングルクォート（'）
```javascript
const message1 = 'こんにちは';
console.log(message1); // こんにちは
```

#### 方法2: ダブルクォート（"）
```javascript
const message2 = "こんにちは";
console.log(message2); // こんにちは
```

#### 方法3: バッククォート（`）- テンプレートリテラル
```javascript
const name = '太郎';
const message3 = `こんにちは、${name}さん`;
console.log(message3); // こんにちは、太郎さん
```

### 文字列の操作

#### 文字列の連結
```javascript
const firstName = '太郎';
const lastName = '山田';
const fullName = firstName + ' ' + lastName;
console.log(fullName); // 太郎 山田
```

#### 文字列の長さ
```javascript
const text = 'Hello';
console.log(text.length); // 5
```

#### 文字列の取得
```javascript
const text = 'Hello';
console.log(text[0]);        // 'H'（最初の文字）
console.log(text.charAt(0)); // 'H'（同じ結果）
```

#### 文字列の検索
```javascript
const text = 'Hello, World!';
console.log(text.indexOf('World')); // 7（見つかった位置）
console.log(text.includes('World')); // true（含まれているか）
```

#### 文字列の置換
```javascript
const text = 'Hello, World!';
const newText = text.replace('World', 'JavaScript');
console.log(newText); // Hello, JavaScript!
```

#### 大文字・小文字の変換
```javascript
const text = 'Hello';
console.log(text.toUpperCase()); // 'HELLO'
console.log(text.toLowerCase()); // 'hello'
```

### 実践例: 文字列型の操作

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>文字列型</title>
</head>
<body>
    <h1>文字列型の操作</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 文字列の作成
        const str1 = 'シングルクォート';
        const str2 = "ダブルクォート";
        const name = '太郎';
        const str3 = `テンプレートリテラル: ${name}さん`;
        
        results.push('<h2>文字列の作成</h2>');
        results.push(`<p>${str1}</p>`);
        results.push(`<p>${str2}</p>`);
        results.push(`<p>${str3}</p>`);
        
        // 文字列の操作
        const text = 'Hello, World!';
        
        results.push('<h2>文字列の操作</h2>');
        results.push(`<p>元の文字列: ${text}</p>`);
        results.push(`<p>長さ: ${text.length}文字</p>`);
        results.push(`<p>最初の文字: ${text[0]}</p>`);
        results.push(`<p>大文字: ${text.toUpperCase()}</p>`);
        results.push(`<p>小文字: ${text.toLowerCase()}</p>`);
        results.push(`<p>'World'を含む: ${text.includes('World')}</p>`);
        results.push(`<p>'World'の位置: ${text.indexOf('World')}</p>`);
        results.push(`<p>置換後: ${text.replace('World', 'JavaScript')}</p>`);
        
        // 文字列の連結
        const firstName = '太郎';
        const lastName = '山田';
        const fullName = firstName + ' ' + lastName;
        
        results.push('<h2>文字列の連結</h2>');
        results.push(`<p>名前: ${fullName}</p>`);
        
        // テンプレートリテラル
        const message = `こんにちは、${fullName}さん！`;
        results.push(`<p>メッセージ: ${message}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 文字列型 ===');
        console.log('文字列:', text);
        console.log('長さ:', text.length);
        console.log('大文字:', text.toUpperCase());
        console.log('小文字:', text.toLowerCase());
        console.log('検索:', text.includes('World'));
    </script>
</body>
</html>
```

---

## 数値型（Number）

数値型は、整数や小数を扱うデータ型です。

### 数値の作成方法

```javascript
const integer = 42;        // 整数
const decimal = 3.14;      // 小数
const negative = -10;      // 負の数
const scientific = 1e5;    // 科学記数法（100000）
```

### 数値の操作

#### 四則演算
```javascript
const a = 10;
const b = 3;

console.log(a + b);  // 13（足し算）
console.log(a - b);  // 7（引き算）
console.log(a * b);  // 30（掛け算）
console.log(a / b);  // 3.333...（割り算）
console.log(a % b); // 1（余り）
```

#### べき乗
```javascript
console.log(2 ** 3); // 8（2の3乗）
console.log(Math.pow(2, 3)); // 8（同じ結果）
```

#### 数値の比較
```javascript
const a = 10;
const b = 20;

console.log(a < b);   // true
console.log(a > b);   // false
console.log(a === b); // false
```

### 特殊な数値

#### NaN（Not a Number）
計算結果が数値でない場合に返されます。

```javascript
console.log('文字列' / 2); // NaN
console.log(isNaN('文字列' / 2)); // true
```

#### Infinity（無限大）
```javascript
console.log(1 / 0);        // Infinity
console.log(-1 / 0);       // -Infinity
console.log(isFinite(1 / 0)); // false
```

### 数値の変換

#### 文字列から数値へ
```javascript
const str = '42';
console.log(Number(str));     // 42
console.log(parseInt(str));  // 42（整数）
console.log(parseFloat('3.14')); // 3.14（小数）
```

#### 数値から文字列へ
```javascript
const num = 42;
console.log(String(num));     // '42'
console.log(num.toString()); // '42'
```

### Mathオブジェクト

```javascript
console.log(Math.PI);           // 3.14159...
console.log(Math.abs(-10));     // 10（絶対値）
console.log(Math.round(3.7));   // 4（四捨五入）
console.log(Math.floor(3.7));   // 3（切り捨て）
console.log(Math.ceil(3.2));    // 4（切り上げ）
console.log(Math.max(1, 5, 3)); // 5（最大値）
console.log(Math.min(1, 5, 3)); // 1（最小値）
console.log(Math.random());     // 0以上1未満の乱数
```

### 実践例: 数値型の操作

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>数値型</title>
</head>
<body>
    <h1>数値型の操作</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 数値の作成
        const integer = 42;
        const decimal = 3.14;
        const negative = -10;
        const scientific = 1e5;
        
        results.push('<h2>数値の作成</h2>');
        results.push(`<p>整数: ${integer}</p>`);
        results.push(`<p>小数: ${decimal}</p>`);
        results.push(`<p>負の数: ${negative}</p>`);
        results.push(`<p>科学記数法: ${scientific}</p>`);
        
        // 四則演算
        const a = 10;
        const b = 3;
        
        results.push('<h2>四則演算</h2>');
        results.push(`<p>${a} + ${b} = ${a + b}</p>`);
        results.push(`<p>${a} - ${b} = ${a - b}</p>`);
        results.push(`<p>${a} × ${b} = ${a * b}</p>`);
        results.push(`<p>${a} ÷ ${b} = ${(a / b).toFixed(2)}</p>`);
        results.push(`<p>${a} ÷ ${b} の余り = ${a % b}</p>`);
        results.push(`<p>${a} の ${b} 乗 = ${a ** b}</p>`);
        
        // Mathオブジェクト
        results.push('<h2>Mathオブジェクト</h2>');
        results.push(`<p>円周率: ${Math.PI}</p>`);
        results.push(`<p>絶対値: Math.abs(-10) = ${Math.abs(-10)}</p>`);
        results.push(`<p>四捨五入: Math.round(3.7) = ${Math.round(3.7)}</p>`);
        results.push(`<p>切り捨て: Math.floor(3.7) = ${Math.floor(3.7)}</p>`);
        results.push(`<p>切り上げ: Math.ceil(3.2) = ${Math.ceil(3.2)}</p>`);
        results.push(`<p>最大値: Math.max(1, 5, 3) = ${Math.max(1, 5, 3)}</p>`);
        results.push(`<p>最小値: Math.min(1, 5, 3) = ${Math.min(1, 5, 3)}</p>`);
        results.push(`<p>乱数: ${Math.random().toFixed(4)}</p>`);
        
        // 数値の変換
        results.push('<h2>数値の変換</h2>');
        const strNum = '42';
        results.push(`<p>文字列 '${strNum}' を数値に: ${Number(strNum)}</p>`);
        results.push(`<p>数値 ${integer} を文字列に: ${String(integer)}</p>`);
        
        // 特殊な数値
        results.push('<h2>特殊な数値</h2>');
        results.push(`<p>NaN: ${'文字列' / 2} (isNaN: ${isNaN('文字列' / 2)})</p>`);
        results.push(`<p>Infinity: ${1 / 0} (isFinite: ${isFinite(1 / 0)})</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 数値型 ===');
        console.log('整数:', integer);
        console.log('小数:', decimal);
        console.log('計算:', a + b);
        console.log('Math.PI:', Math.PI);
        console.log('乱数:', Math.random());
    </script>
</body>
</html>
```

---

## 真偽値（Boolean）

真偽値は、`true`（真）または`false`（偽）の2つの値のみを持つデータ型です。

### 真偽値の作成

```javascript
const isTrue = true;
const isFalse = false;

console.log(isTrue);  // true
console.log(isFalse); // false
```

### 真偽値が使われる場面

#### 1. 条件分岐
```javascript
const isLoggedIn = true;

if (isLoggedIn) {
    console.log('ログイン中です');
} else {
    console.log('ログインしてください');
}
```

#### 2. 比較演算の結果
```javascript
console.log(10 > 5);   // true
console.log(10 < 5);   // false
console.log(10 === 10); // true
console.log(10 !== 5);  // true
```

#### 3. 論理演算
```javascript
console.log(true && true);   // true（AND）
console.log(true || false);  // true（OR）
console.log(!true);          // false（NOT）
```

### 真偽値への変換

#### 明示的な変換
```javascript
console.log(Boolean(1));      // true
console.log(Boolean(0));      // false
console.log(Boolean('文字')); // true
console.log(Boolean(''));     // false
console.log(Boolean(null));   // false
console.log(Boolean(undefined)); // false
```

#### 暗黙的な変換（真偽値として評価される値）

**falsy（偽と評価される値）:**
- `false`
- `0`
- `''`（空文字列）
- `null`
- `undefined`
- `NaN`

**truthy（真と評価される値）:**
- 上記以外のすべての値

```javascript
if (0) {
    console.log('実行されない');
}

if (1) {
    console.log('実行される'); // 実行される
}

if ('') {
    console.log('実行されない');
}

if ('文字列') {
    console.log('実行される'); // 実行される
}
```

### 実践例: 真偽値の操作

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>真偽値</title>
</head>
<body>
    <h1>真偽値（Boolean）</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 真偽値の作成
        const isTrue = true;
        const isFalse = false;
        
        results.push('<h2>真偽値の作成</h2>');
        results.push(`<p>true: ${isTrue} (型: ${typeof isTrue})</p>`);
        results.push(`<p>false: ${isFalse} (型: ${typeof isFalse})</p>`);
        
        // 比較演算の結果
        results.push('<h2>比較演算の結果</h2>');
        results.push(`<p>10 > 5: ${10 > 5}</p>`);
        results.push(`<p>10 < 5: ${10 < 5}</p>`);
        results.push(`<p>10 === 10: ${10 === 10}</p>`);
        results.push(`<p>10 !== 5: ${10 !== 5}</p>`);
        results.push(`<p>'文字列' === '文字列': ${'文字列' === '文字列'}</p>`);
        
        // 論理演算
        results.push('<h2>論理演算</h2>');
        results.push(`<p>true && true: ${true && true}</p>`);
        results.push(`<p>true && false: ${true && false}</p>`);
        results.push(`<p>true || false: ${true || false}</p>`);
        results.push(`<p>false || false: ${false || false}</p>`);
        results.push(`<p>!true: ${!true}</p>`);
        results.push(`<p>!false: ${!false}</p>`);
        
        // 真偽値への変換
        results.push('<h2>真偽値への変換</h2>');
        results.push(`<p>Boolean(1): ${Boolean(1)}</p>`);
        results.push(`<p>Boolean(0): ${Boolean(0)}</p>`);
        results.push(`<p>Boolean('文字'): ${Boolean('文字')}</p>`);
        results.push(`<p>Boolean(''): ${Boolean('')}</p>`);
        results.push(`<p>Boolean(null): ${Boolean(null)}</p>`);
        results.push(`<p>Boolean(undefined): ${Boolean(undefined)}</p>`);
        
        // 実践例: 条件分岐
        results.push('<h2>実践例: 条件分岐</h2>');
        const isLoggedIn = true;
        const userAge = 25;
        const hasLicense = false;
        
        if (isLoggedIn) {
            results.push('<p>✓ ログイン中です</p>');
        }
        
        if (userAge >= 20) {
            results.push(`<p>✓ 成人です（${userAge}歳）</p>`);
        }
        
        if (hasLicense) {
            results.push('<p>✓ 運転免許を持っています</p>');
        } else {
            results.push('<p>✗ 運転免許を持っていません</p>');
        }
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 真偽値 ===');
        console.log('true:', isTrue);
        console.log('false:', isFalse);
        console.log('比較:', 10 > 5);
        console.log('論理演算:', true && false);
        console.log('変換:', Boolean(1));
    </script>
</body>
</html>
```

---

## null

`null`は、「値が存在しない」ことを**明示的に示す**値です。

### nullの特徴

```javascript
const value = null;
console.log(value);      // null
console.log(typeof value); // "object"（注意: これはJavaScriptのバグ）
```

### nullが使われる場面

- オブジェクトが存在しないことを明示
- データが未設定であることを示す
- 初期化されていない状態を示す

### nullとundefinedの違い

| 項目 | null | undefined |
|------|------|-----------|
| **意味** | 値が存在しない（明示的） | 値が定義されていない（暗黙的） |
| **代入** | 明示的に代入する | 自動的に設定される |
| **用途** | 意図的に「値なし」を示す | 変数が未定義であることを示す |

```javascript
// null: 明示的に「値なし」を設定
let user = null;
console.log(user); // null

// undefined: 変数が定義されていない
let value;
console.log(value); // undefined
```

### 実践例: nullの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>null</title>
</head>
<body>
    <h1>nullの使い方</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // nullの基本
        const nullValue = null;
        
        results.push('<h2>nullの基本</h2>');
        results.push(`<p>値: ${nullValue}</p>`);
        results.push(`<p>型: ${typeof nullValue}（注意: "object"と表示されるが、これはJavaScriptのバグ）</p>`);
        results.push(`<p>null === null: ${nullValue === null}</p>`);
        
        // nullが使われる場面
        results.push('<h2>nullが使われる場面</h2>');
        
        // ユーザー情報が存在しない場合
        let currentUser = null;
        results.push(`<p>現在のユーザー: ${currentUser === null ? '未ログイン' : currentUser}</p>`);
        
        // データが未設定の場合
        let userData = null;
        if (userData === null) {
            results.push('<p>ユーザーデータは未設定です</p>');
        }
        
        // nullとundefinedの比較
        results.push('<h2>nullとundefinedの違い</h2>');
        let undefinedValue;
        results.push(`<p>null: ${nullValue}（明示的に「値なし」を設定）</p>`);
        results.push(`<p>undefined: ${undefinedValue}（変数が未定義）</p>`);
        results.push(`<p>null === undefined: ${null === undefined}</p>`);
        results.push(`<p>null == undefined: ${null == undefined}</p>`);
        
        // nullチェック
        results.push('<h2>nullチェック</h2>');
        function getUserName(user) {
            if (user === null) {
                return 'ユーザーが存在しません';
            }
            return user.name;
        }
        
        results.push(`<p>getUserName(null): ${getUserName(null)}</p>`);
        results.push(`<p>getUserName({name: '太郎'}): ${getUserName({name: '太郎'})}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== null ===');
        console.log('null:', nullValue);
        console.log('typeof null:', typeof nullValue);
        console.log('null === null:', nullValue === null);
        console.log('nullとundefinedの違い');
        console.log('  null: 明示的に「値なし」を設定');
        console.log('  undefined: 変数が未定義');
    </script>
</body>
</html>
```

---

## undefined

`undefined`は、「値が定義されていない」ことを示す値です。

### undefinedの特徴

```javascript
let value;
console.log(value);        // undefined
console.log(typeof value); // "undefined"
```

### undefinedが発生する場面

#### 1. 変数が宣言されていない
```javascript
let value;
console.log(value); // undefined
```

#### 2. オブジェクトの存在しないプロパティにアクセス
```javascript
const obj = { name: '太郎' };
console.log(obj.age); // undefined
```

#### 3. 関数が値を返さない
```javascript
function noReturn() {
    // return文がない
}
console.log(noReturn()); // undefined
```

#### 4. 関数の引数が渡されていない
```javascript
function greet(name) {
    console.log(name); // undefined（引数が渡されていない場合）
}
greet();
```

### undefinedのチェック

```javascript
let value;

// 方法1: === を使う（推奨）
if (value === undefined) {
    console.log('値が未定義です');
}

// 方法2: typeof を使う
if (typeof value === 'undefined') {
    console.log('値が未定義です');
}
```

### undefinedとnullの使い分け

- **undefined**: 変数が定義されていない、値が設定されていない（暗黙的）
- **null**: 値が存在しないことを明示的に示す（明示的）

```javascript
// undefined: 自動的に設定される
let value1;
console.log(value1); // undefined

// null: 明示的に設定する
let value2 = null;
console.log(value2); // null
```

### 実践例: undefinedの使い方

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>undefined</title>
</head>
<body>
    <h1>undefinedの使い方</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // undefinedの基本
        let undefinedValue;
        
        results.push('<h2>undefinedの基本</h2>');
        results.push(`<p>値: ${undefinedValue}</p>`);
        results.push(`<p>型: ${typeof undefinedValue}</p>`);
        results.push(`<p>undefined === undefined: ${undefined === undefined}</p>`);
        
        // undefinedが発生する場面
        results.push('<h2>undefinedが発生する場面</h2>');
        
        // 1. 変数が宣言されていない
        let value1;
        results.push(`<p>1. 未初期化の変数: ${value1}</p>`);
        
        // 2. オブジェクトの存在しないプロパティ
        const obj = { name: '太郎' };
        results.push(`<p>2. 存在しないプロパティ: ${obj.age}</p>`);
        
        // 3. 関数が値を返さない
        function noReturn() {
            // return文がない
        }
        results.push(`<p>3. 戻り値のない関数: ${noReturn()}</p>`);
        
        // 4. 関数の引数が渡されていない
        function greet(name) {
            return name;
        }
        results.push(`<p>4. 引数が渡されていない: ${greet()}</p>`);
        
        // undefinedのチェック
        results.push('<h2>undefinedのチェック</h2>');
        let checkValue;
        
        if (checkValue === undefined) {
            results.push('<p>✓ 値が未定義です（=== を使う方法）</p>');
        }
        
        if (typeof checkValue === 'undefined') {
            results.push('<p>✓ 値が未定義です（typeof を使う方法）</p>');
        }
        
        // undefinedとnullの比較
        results.push('<h2>undefinedとnullの比較</h2>');
        results.push(`<p>undefined === null: ${undefined === null}</p>`);
        results.push(`<p>undefined == null: ${undefined == null}</p>`);
        results.push(`<p>typeof undefined: ${typeof undefined}</p>`);
        results.push(`<p>typeof null: ${typeof null}</p>`);
        
        // 実践例: デフォルト値の設定
        results.push('<h2>実践例: デフォルト値の設定</h2>');
        function greetUser(name) {
            if (name === undefined) {
                name = 'ゲスト';
            }
            return `こんにちは、${name}さん`;
        }
        
        results.push(`<p>greetUser(): ${greetUser()}</p>`);
        results.push(`<p>greetUser('太郎'): ${greetUser('太郎')}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== undefined ===');
        console.log('undefined:', undefinedValue);
        console.log('typeof undefined:', typeof undefinedValue);
        console.log('undefinedが発生する場面:');
        console.log('  1. 変数が宣言されていない');
        console.log('  2. オブジェクトの存在しないプロパティ');
        console.log('  3. 関数が値を返さない');
        console.log('  4. 関数の引数が渡されていない');
    </script>
</body>
</html>
```

---

## データ型の確認方法

変数のデータ型を確認する方法を学びます。

### typeof演算子

`typeof`演算子は、変数のデータ型を文字列で返します。

```javascript
console.log(typeof '文字列');    // "string"
console.log(typeof 42);          // "number"
console.log(typeof true);         // "boolean"
console.log(typeof null);         // "object"（注意: これはバグ）
console.log(typeof undefined);    // "undefined"
console.log(typeof {});           // "object"
console.log(typeof []);           // "object"
console.log(typeof function() {}); // "function"
```

### データ型の確認方法

#### 方法1: typeof演算子（基本）
```javascript
const str = '文字列';
console.log(typeof str); // "string"
```

#### 方法2: Array.isArray()（配列の確認）
```javascript
const arr = [1, 2, 3];
console.log(Array.isArray(arr)); // true
console.log(typeof arr);         // "object"（配列かどうか分からない）
```

#### 方法3: instanceof演算子（オブジェクトの型確認）
```javascript
const date = new Date();
console.log(date instanceof Date); // true
```

#### 方法4: Object.prototype.toString.call()（詳細な型確認）
```javascript
console.log(Object.prototype.toString.call([]));        // "[object Array]"
console.log(Object.prototype.toString.call(null));      // "[object Null]"
console.log(Object.prototype.toString.call(undefined)); // "[object Undefined]"
```

### 実践例: データ型の確認

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>データ型の確認</title>
</head>
<body>
    <h1>データ型の確認方法</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 様々なデータ型
        const str = '文字列';
        const num = 42;
        const bool = true;
        const nul = null;
        let undef;
        const obj = { name: '太郎' };
        const arr = [1, 2, 3];
        const func = function() {};
        const date = new Date();
        
        results.push('<h2>typeof演算子</h2>');
        results.push(`<p>文字列: ${typeof str}</p>`);
        results.push(`<p>数値: ${typeof num}</p>`);
        results.push(`<p>真偽値: ${typeof bool}</p>`);
        results.push(`<p>null: ${typeof nul}（注意: "object"と表示される）</p>`);
        results.push(`<p>undefined: ${typeof undef}</p>`);
        results.push(`<p>オブジェクト: ${typeof obj}</p>`);
        results.push(`<p>配列: ${typeof arr}（配列かどうか分からない）</p>`);
        results.push(`<p>関数: ${typeof func}</p>`);
        results.push(`<p>日付: ${typeof date}</p>`);
        
        // 配列の確認
        results.push('<h2>配列の確認（Array.isArray）</h2>');
        results.push(`<p>Array.isArray(arr): ${Array.isArray(arr)}</p>`);
        results.push(`<p>Array.isArray(obj): ${Array.isArray(obj)}</p>`);
        
        // instanceof演算子
        results.push('<h2>instanceof演算子</h2>');
        results.push(`<p>date instanceof Date: ${date instanceof Date}</p>`);
        results.push(`<p>arr instanceof Array: ${arr instanceof Array}</p>`);
        results.push(`<p>obj instanceof Object: ${obj instanceof Object}</p>`);
        
        // 詳細な型確認
        results.push('<h2>詳細な型確認（Object.prototype.toString.call）</h2>');
        results.push(`<p>配列: ${Object.prototype.toString.call(arr)}</p>`);
        results.push(`<p>null: ${Object.prototype.toString.call(nul)}</p>`);
        results.push(`<p>undefined: ${Object.prototype.toString.call(undef)}</p>`);
        results.push(`<p>日付: ${Object.prototype.toString.call(date)}</p>`);
        
        // 実践例: 型チェック関数
        results.push('<h2>実践例: 型チェック関数</h2>');
        function checkType(value) {
            if (value === null) {
                return 'null';
            }
            if (Array.isArray(value)) {
                return 'array';
            }
            return typeof value;
        }
        
        results.push(`<p>checkType('文字'): ${checkType('文字')}</p>`);
        results.push(`<p>checkType(42): ${checkType(42)}</p>`);
        results.push(`<p>checkType([1, 2]): ${checkType([1, 2])}</p>`);
        results.push(`<p>checkType(null): ${checkType(null)}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== データ型の確認 ===');
        console.table({
            '文字列': typeof str,
            '数値': typeof num,
            '真偽値': typeof bool,
            'null': typeof nul,
            'undefined': typeof undef,
            'オブジェクト': typeof obj,
            '配列': typeof arr,
            '関数': typeof func
        });
        
        console.log('配列の確認:', Array.isArray(arr));
        console.log('日付の確認:', date instanceof Date);
    </script>
</body>
</html>
```

---

## 型変換

データ型を別の型に変換する方法を学びます。

### 明示的な型変換

#### 文字列への変換

```javascript
// 方法1: String()
const num = 42;
console.log(String(num)); // '42'

// 方法2: toString()
console.log(num.toString()); // '42'

// 方法3: 文字列連結（暗黙的変換）
console.log(num + ''); // '42'
```

#### 数値への変換

```javascript
// 方法1: Number()
const str = '42';
console.log(Number(str)); // 42

// 方法2: parseInt()（整数）
console.log(parseInt('42'));      // 42
console.log(parseInt('3.14'));    // 3（小数部分は切り捨て）

// 方法3: parseFloat()（小数）
console.log(parseFloat('3.14'));  // 3.14

// 方法4: 単項プラス演算子
console.log(+'42'); // 42
```

#### 真偽値への変換

```javascript
// Boolean()
console.log(Boolean(1));      // true
console.log(Boolean(0));      // false
console.log(Boolean('文字')); // true
console.log(Boolean(''));     // false
console.log(Boolean(null));   // false
```

### 暗黙的な型変換

JavaScriptは、文脈に応じて自動的に型を変換します。

```javascript
// 文字列連結（数値が文字列に変換される）
console.log('答えは' + 42); // '答えは42'

// 数値計算（文字列が数値に変換される）
console.log('10' * 2); // 20
console.log('10' / 2); // 5

// 比較演算（型が異なる場合、自動変換される）
console.log('10' == 10);  // true（型変換される）
console.log('10' === 10); // false（型変換されない）
```

### 型変換の注意点

#### NaN（Not a Number）
数値に変換できない文字列は`NaN`になります。

```javascript
console.log(Number('文字列')); // NaN
console.log(parseInt('abc'));  // NaN
console.log(isNaN(Number('文字列'))); // true
```

#### 真偽値への変換（falsy/truthy）
```javascript
// falsy（偽と評価される値）
if (!0) console.log('0は偽');
if (!'') console.log('空文字列は偽');
if (!null) console.log('nullは偽');
if (!undefined) console.log('undefinedは偽');
if (!NaN) console.log('NaNは偽');

// truthy（真と評価される値）
if (1) console.log('1は真');
if ('文字') console.log('文字列は真');
if ([]) console.log('空配列は真');
if ({}) console.log('空オブジェクトは真');
```

### 実践例: 型変換

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>型変換</title>
</head>
<body>
    <h1>型変換</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // ===== 文字列への変換 =====
        results.push('<h2>文字列への変換</h2>');
        const num = 42;
        results.push(`<p>Number(42) → String(): ${String(num)}</p>`);
        results.push(`<p>Number(42) → toString(): ${num.toString()}</p>`);
        results.push(`<p>Number(42) → + '': ${num + ''}</p>`);
        
        // ===== 数値への変換 =====
        results.push('<h2>数値への変換</h2>');
        const str = '42';
        results.push(`<p>String('42') → Number(): ${Number(str)}</p>`);
        results.push(`<p>String('3.14') → parseInt(): ${parseInt('3.14')}</p>`);
        results.push(`<p>String('3.14') → parseFloat(): ${parseFloat('3.14')}</p>`);
        results.push(`<p>String('42') → +演算子: ${+'42'}</p>`);
        
        // ===== 真偽値への変換 =====
        results.push('<h2>真偽値への変換</h2>');
        results.push(`<p>Boolean(1): ${Boolean(1)}</p>`);
        results.push(`<p>Boolean(0): ${Boolean(0)}</p>`);
        results.push(`<p>Boolean('文字'): ${Boolean('文字')}</p>`);
        results.push(`<p>Boolean(''): ${Boolean('')}</p>`);
        results.push(`<p>Boolean(null): ${Boolean(null)}</p>`);
        results.push(`<p>Boolean(undefined): ${Boolean(undefined)}</p>`);
        
        // ===== 暗黙的な型変換 =====
        results.push('<h2>暗黙的な型変換</h2>');
        results.push(`<p>'答えは' + 42: ${'答えは' + 42}</p>`);
        results.push(`<p>'10' * 2: ${'10' * 2}</p>`);
        results.push(`<p>'10' / 2: ${'10' / 2}</p>`);
        results.push(`<p>'10' == 10: ${'10' == 10}（型変換される）</p>`);
        results.push(`<p>'10' === 10: ${'10' === 10}（型変換されない）</p>`);
        
        // ===== 型変換の注意点 =====
        results.push('<h2>型変換の注意点</h2>');
        results.push(`<p>Number('文字列'): ${Number('文字列')}（NaNになる）</p>`);
        results.push(`<p>isNaN(Number('文字列')): ${isNaN(Number('文字列'))}</p>`);
        
        // ===== 実践例: フォーム入力の型変換 =====
        results.push('<h2>実践例: フォーム入力の型変換</h2>');
        
        // フォームから取得した値は文字列
        const userInput = '25'; // フォームから取得した値（文字列）
        const age = Number(userInput); // 数値に変換
        
        if (isNaN(age)) {
            results.push('<p>エラー: 数値を入力してください</p>');
        } else {
            results.push(`<p>年齢: ${age}歳（型: ${typeof age}）</p>`);
        }
        
        // 文字列の連結
        const name = '太郎';
        const message = `こんにちは、${name}さん。年齢は${age}歳です。`;
        results.push(`<p>メッセージ: ${message}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 型変換 ===');
        console.log('文字列への変換:', String(42));
        console.log('数値への変換:', Number('42'));
        console.log('真偽値への変換:', Boolean(1));
        console.log('暗黙的な変換:', '答えは' + 42);
        console.log('NaNの確認:', isNaN(Number('文字列')));
    </script>
</body>
</html>
```

---

## まとめ

この章では、JavaScriptのデータ型について学びました。

### 学んだこと
- プリミティブ型とオブジェクト型の違い
- 動的型付け言語の特徴
- 文字列型（String）の操作
- 数値型（Number）の操作
- 真偽値（Boolean）の使い方
- `null`と`undefined`の違い
- データ型の確認方法（`typeof`、`Array.isArray`など）
- 型変換（明示的・暗黙的）

### 重要なポイント
1. **JavaScriptは動的型付け言語**（型を事前に宣言しない）
2. **プリミティブ型は値がコピーされる**、**オブジェクト型は参照がコピーされる**
3. **`null`は明示的な「値なし」**、**`undefined`は未定義**
4. **型変換は明示的に行う**（`Number()`、`String()`など）
5. **`===`を使う**（型変換されない厳密等価）

### 次のステップ
次の章では、演算子と計算について詳しく学びます。

---

## 演習問題

### 問題1: データ型の確認
変数`value`のデータ型を確認し、コンソールに表示してください。`value`には様々な値を代入して確認してください。

<details>
<summary>解答例</summary>

```javascript
let value;

value = '文字列';
console.log(typeof value); // "string"

value = 42;
console.log(typeof value); // "number"

value = true;
console.log(typeof value); // "boolean"

value = null;
console.log(typeof value); // "object"
console.log(value === null); // true

value = undefined;
console.log(typeof value); // "undefined"
```
</details>

### 問題2: 文字列の操作
文字列`'Hello, World!'`に対して、以下の操作を行ってください：
- 長さを取得
- 大文字に変換
- 'World'を'JavaScript'に置換

<details>
<summary>解答例</summary>

```javascript
const text = 'Hello, World!';

console.log('長さ:', text.length);
console.log('大文字:', text.toUpperCase());
console.log('置換:', text.replace('World', 'JavaScript'));
```
</details>

### 問題3: 数値の計算
2つの数値`10`と`3`に対して、四則演算（足し算、引き算、掛け算、割り算、余り）を行ってください。

<details>
<summary>解答例</summary>

```javascript
const a = 10;
const b = 3;

console.log('足し算:', a + b);   // 13
console.log('引き算:', a - b);   // 7
console.log('掛け算:', a * b);   // 30
console.log('割り算:', a / b);   // 3.333...
console.log('余り:', a % b);     // 1
```
</details>

### 問題4: 真偽値の判定
変数`age`が20以上の場合に「成人です」、そうでない場合に「未成年です」と表示してください。

<details>
<summary>解答例</summary>

```javascript
const age = 25;

if (age >= 20) {
    console.log('成人です');
} else {
    console.log('未成年です');
}

// または三項演算子
const message = age >= 20 ? '成人です' : '未成年です';
console.log(message);
```
</details>

### 問題5: 型変換
文字列`'42'`を数値に変換し、その数値に10を足して、結果を文字列として表示してください。

<details>
<summary>解答例</summary>

```javascript
const str = '42';
const num = Number(str);        // 数値に変換
const result = num + 10;        // 計算
const resultStr = String(result); // 文字列に変換

console.log(resultStr); // "52"

// または一行で
console.log(String(Number('42') + 10)); // "52"
```
</details>

---

お疲れ様でした！次の章に進みましょう。

