# 3. 演算子と計算

この章では、JavaScriptで計算や比較を行うための「演算子」について学びます。演算子を理解することで、様々な計算や条件判定ができるようになります。

---

## 目次

- [演算子](#演算子)
- [四則演算](#四則演算)
- [計算順序の制御](#計算順序の制御)
- [インクリメントとデクリメント](#インクリメントとデクリメント)
- [等価性の比較](#等価性の比較)
- [比較演算子の基本](#比較演算子の基本)
- [NOT演算子](#not演算子)
- [コードをスッキリ書く 自己代入演算子](#コードをスッキリ書く-自己代入演算子)
- [論理演算子](#論理演算子)
- [まとめ](#まとめ)
- [演習問題](#演習問題)

---

## 演算子

### 演算子とは
演算子（operator）は、値に対して操作を行う記号です。例えば、`+`（プラス）や`-`（マイナス）などが演算子です。

### 演算子の種類
JavaScriptには、以下のような演算子があります：

1. **算術演算子**: 計算を行う（`+`, `-`, `*`, `/`, `%`など）
2. **比較演算子**: 値を比較する（`>`, `<`, `===`, `!==`など）
3. **論理演算子**: 真偽値を操作する（`&&`, `||`, `!`など）
4. **代入演算子**: 値を代入する（`=`, `+=`, `-=`など）

### 演算子の基本構文

```javascript
// 基本的な形式
値1 演算子 値2

// 例
10 + 5    // 足し算
10 > 5    // 比較
true && false  // 論理演算
```

### 実践例: 演算子の基本

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>演算子とは</title>
</head>
<body>
    <h1>演算子の基本</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 算術演算子の例
        results.push('<h2>算術演算子</h2>');
        results.push(`<p>10 + 5 = ${10 + 5}</p>`);
        results.push(`<p>10 - 5 = ${10 - 5}</p>`);
        results.push(`<p>10 * 5 = ${10 * 5}</p>`);
        results.push(`<p>10 / 5 = ${10 / 5}</p>`);
        
        // 比較演算子の例
        results.push('<h2>比較演算子</h2>');
        results.push(`<p>10 > 5: ${10 > 5}</p>`);
        results.push(`<p>10 < 5: ${10 < 5}</p>`);
        results.push(`<p>10 === 10: ${10 === 10}</p>`);
        
        // 論理演算子の例
        results.push('<h2>論理演算子</h2>');
        results.push(`<p>true && false: ${true && false}</p>`);
        results.push(`<p>true || false: ${true || false}</p>`);
        results.push(`<p>!true: ${!true}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 演算子の基本 ===');
        console.log('算術演算:', 10 + 5);
        console.log('比較演算:', 10 > 5);
        console.log('論理演算:', true && false);
    </script>
</body>
</html>
```

---

## 四則演算

四則演算は、足し算、引き算、掛け算、割り算の4つの基本的な計算です。

### 基本的な四則演算

#### 足し算（+）
```javascript
const sum = 10 + 5;
console.log(sum); // 15
```

#### 引き算（-）
```javascript
const difference = 10 - 5;
console.log(difference); // 5
```

#### 掛け算（*）
```javascript
const product = 10 * 5;
console.log(product); // 50
```

#### 割り算（/）
```javascript
const quotient = 10 / 5;
console.log(quotient); // 2
```

#### 余り（%）
```javascript
const remainder = 10 % 3;
console.log(remainder); // 1（10を3で割った余り）
```

### べき乗（**）
```javascript
const power = 2 ** 3;  // 2の3乗
console.log(power);    // 8
```

### 複数の計算
```javascript
const result = 10 + 5 * 2;  // 20（掛け算が先に計算される）
console.log(result);

const result2 = (10 + 5) * 2;  // 30（括弧内が先に計算される）
console.log(result2);
```

### 実践例: 四則演算

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>四則演算</title>
</head>
<body>
    <h1>四則演算の練習</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 基本的な四則演算
        const a = 10;
        const b = 3;
        
        results.push('<h2>基本的な四則演算</h2>');
        results.push(`<p>${a} + ${b} = ${a + b}</p>`);
        results.push(`<p>${a} - ${b} = ${a - b}</p>`);
        results.push(`<p>${a} × ${b} = ${a * b}</p>`);
        results.push(`<p>${a} ÷ ${b} = ${(a / b).toFixed(2)}</p>`);
        results.push(`<p>${a} ÷ ${b} の余り = ${a % b}</p>`);
        
        // べき乗
        results.push('<h2>べき乗</h2>');
        results.push(`<p>2の3乗 = ${2 ** 3}</p>`);
        results.push(`<p>5の2乗 = ${5 ** 2}</p>`);
        
        // 複数の計算
        results.push('<h2>複数の計算</h2>');
        results.push(`<p>10 + 5 × 2 = ${10 + 5 * 2}（掛け算が先）</p>`);
        results.push(`<p>(10 + 5) × 2 = ${(10 + 5) * 2}（括弧内が先）</p>`);
        
        // 実践例: 買い物の計算
        results.push('<h2>実践例: 買い物の計算</h2>');
        const applePrice = 100;
        const appleCount = 5;
        const orangePrice = 150;
        const orangeCount = 3;
        
        const total = (applePrice * appleCount) + (orangePrice * orangeCount);
        results.push(`<p>りんご: ${applePrice}円 × ${appleCount}個 = ${applePrice * appleCount}円</p>`);
        results.push(`<p>みかん: ${orangePrice}円 × ${orangeCount}個 = ${orangePrice * orangeCount}円</p>`);
        results.push(`<p>合計: ${total}円</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 四則演算 ===');
        console.log('足し算:', a + b);
        console.log('引き算:', a - b);
        console.log('掛け算:', a * b);
        console.log('割り算:', a / b);
        console.log('余り:', a % b);
        console.log('べき乗:', 2 ** 3);
    </script>
</body>
</html>
```

---

## 計算順序の制御

計算の順序を制御するには、**括弧（`()`）**を使います。

### 演算子の優先順位

JavaScriptでは、演算子に優先順位があります。優先順位が高い演算子から先に計算されます。

#### 優先順位の例
1. **括弧**: `()` - 最優先
2. **べき乗**: `**`
3. **掛け算・割り算・余り**: `*`, `/`, `%`
4. **足し算・引き算**: `+`, `-`

```javascript
// 優先順位の例
console.log(10 + 5 * 2);      // 20（掛け算が先）
console.log((10 + 5) * 2);    // 30（括弧内が先）
console.log(2 ** 3 + 1);      // 9（べき乗が先）
console.log(2 ** (3 + 1));    // 16（括弧内が先）
```

### 括弧を使った計算順序の制御

```javascript
// 括弧なし
const result1 = 10 + 5 * 2;  // 20

// 括弧あり
const result2 = (10 + 5) * 2;  // 30

// 複数の括弧
const result3 = ((10 + 5) * 2) / 3;  // 10
```

### 実践例: 計算順序の制御

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>計算順序の制御</title>
</head>
<body>
    <h1>計算順序の制御</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 優先順位の例
        results.push('<h2>演算子の優先順位</h2>');
        results.push(`<p>10 + 5 × 2 = ${10 + 5 * 2}（掛け算が先）</p>`);
        results.push(`<p>(10 + 5) × 2 = ${(10 + 5) * 2}（括弧内が先）</p>`);
        results.push(`<p>2の3乗 + 1 = ${2 ** 3 + 1}（べき乗が先）</p>`);
        results.push(`<p>2の(3 + 1)乗 = ${2 ** (3 + 1)}（括弧内が先）</p>`);
        
        // 括弧を使った計算
        results.push('<h2>括弧を使った計算</h2>');
        results.push(`<p>括弧なし: 10 + 5 × 2 = ${10 + 5 * 2}</p>`);
        results.push(`<p>括弧あり: (10 + 5) × 2 = ${(10 + 5) * 2}</p>`);
        results.push(`<p>複数の括弧: ((10 + 5) × 2) ÷ 3 = ${((10 + 5) * 2) / 3}</p>`);
        
        // 実践例: 割引計算
        results.push('<h2>実践例: 割引計算</h2>');
        const originalPrice = 1000;
        const discountRate = 0.2;  // 20%割引
        const taxRate = 0.1;       // 10%税
        
        // 間違った計算（税を先に計算）
        const wrongPrice = originalPrice * (1 + taxRate) * (1 - discountRate);
        
        // 正しい計算（割引を先に、その後税を計算）
        const correctPrice = originalPrice * (1 - discountRate) * (1 + taxRate);
        
        results.push(`<p>元の価格: ${originalPrice}円</p>`);
        results.push(`<p>間違った計算（税→割引）: ${wrongPrice.toFixed(0)}円</p>`);
        results.push(`<p>正しい計算（割引→税）: ${correctPrice.toFixed(0)}円</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 計算順序の制御 ===');
        console.log('括弧なし:', 10 + 5 * 2);
        console.log('括弧あり:', (10 + 5) * 2);
        console.log('複数の括弧:', ((10 + 5) * 2) / 3);
    </script>
</body>
</html>
```

---

## インクリメントとデクリメント

インクリメント（`++`）は値を1増やし、デクリメント（`--`）は値を1減らします。

### インクリメント（++）

#### 前置インクリメント（++変数）
変数の前に`++`を付けると、**先に値を増やしてから**使用します。

```javascript
let count = 5;
console.log(++count);  // 6（先に増やしてから表示）
console.log(count);    // 6
```

#### 後置インクリメント（変数++）
変数の後に`++`を付けると、**先に使用してから**値を増やします。

```javascript
let count = 5;
console.log(count++);  // 5（先に表示してから増やす）
console.log(count);    // 6（増やされた後の値）
```

### デクリメント（--）

#### 前置デクリメント（--変数）
```javascript
let count = 5;
console.log(--count);  // 4（先に減らしてから表示）
console.log(count);    // 4
```

#### 後置デクリメント（変数--）
```javascript
let count = 5;
console.log(count--);  // 5（先に表示してから減らす）
console.log(count);    // 4（減らされた後の値）
```

### インクリメント・デクリメントの使い分け

```javascript
// ループでよく使われる
for (let i = 0; i < 5; i++) {
    console.log(i);  // 0, 1, 2, 3, 4
}

// カウンターとして使う
let counter = 0;
counter++;  // 1
counter++;  // 2
counter--;  // 1
```

### 実践例: インクリメントとデクリメント

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>インクリメントとデクリメント</title>
</head>
<body>
    <h1>インクリメントとデクリメント</h1>
    <button id="incrementBtn">+1</button>
    <button id="decrementBtn">-1</button>
    <div id="counter">0</div>
    <div id="output"></div>
    
    <script>
        let count = 0;
        
        const incrementBtn = document.getElementById('incrementBtn');
        const decrementBtn = document.getElementById('decrementBtn');
        const counter = document.getElementById('counter');
        const output = document.getElementById('output');
        
        function updateDisplay() {
            counter.textContent = count;
            
            // 説明を表示
            const results = [];
            results.push('<h2>インクリメント・デクリメントの例</h2>');
            
            // 前置と後置の違いを説明
            let a = 5;
            let b = 5;
            
            results.push(`<p>前置インクリメント: ++a = ${++a}（先に増やす）</p>`);
            
            let c = 5;
            results.push(`<p>後置インクリメント: c++ = ${c++}（先に使用）、その後 c = ${c}</p>`);
            
            results.push(`<p>現在のカウント: ${count}</p>`);
            
            output.innerHTML = results.join('');
        }
        
        // 初期表示
        updateDisplay();
        
        incrementBtn.addEventListener('click', function() {
            count++;  // 後置インクリメント
            console.log('カウントアップ:', count);
            updateDisplay();
        });
        
        decrementBtn.addEventListener('click', function() {
            count--;  // 後置デクリメント
            console.log('カウントダウン:', count);
            updateDisplay();
        });
        
        // コンソールで確認
        console.log('=== インクリメントとデクリメント ===');
        let x = 5;
        console.log('前置:', ++x);  // 6
        console.log('xの値:', x);   // 6
        
        let y = 5;
        console.log('後置:', y++);  // 5
        console.log('yの値:', y);    // 6
    </script>
</body>
</html>
```

---

## 等価性の比較

値が等しいかどうかを比較する方法を学びます。JavaScriptには2種類の等価演算子があります。

### ==（等価演算子）
型変換を行ってから比較します。

```javascript
console.log(10 == 10);    // true
console.log(10 == '10'); // true（型変換される）
console.log(true == 1);   // true（型変換される）
```

### ===（厳密等価演算子）
型変換を行わずに比較します。**こちらを使うことが推奨されます。**

```javascript
console.log(10 === 10);    // true
console.log(10 === '10');  // false（型が異なる）
console.log(true === 1);    // false（型が異なる）
```

### !=（不等価演算子）
型変換を行ってから比較します。

```javascript
console.log(10 != 5);     // true
console.log(10 != '10');  // false（型変換される）
```

### !==（厳密不等価演算子）
型変換を行わずに比較します。**こちらを使うことが推奨されます。**

```javascript
console.log(10 !== 5);     // true
console.log(10 !== '10');  // true（型が異なる）
```

### == と === の使い分け

**原則: `===` と `!==` を使う**

```javascript
// 推奨: 厳密等価演算子
if (age === 20) {
    console.log('20歳です');
}

// 非推奨: 等価演算子（予期しない動作の可能性）
if (age == '20') {  // 型変換される
    console.log('20歳です');
}
```

### 実践例: 等価性の比較

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>等価性の比較</title>
</head>
<body>
    <h1>等価性の比較</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // == と === の違い
        results.push('<h2>== と === の違い</h2>');
        results.push(`<p>10 == 10: ${10 == 10}</p>`);
        results.push(`<p>10 == '10': ${10 == '10'}（型変換される）</p>`);
        results.push(`<p>10 === 10: ${10 === 10}</p>`);
        results.push(`<p>10 === '10': ${10 === '10'}（型変換されない）</p>`);
        results.push(`<p>true == 1: ${true == 1}（型変換される）</p>`);
        results.push(`<p>true === 1: ${true === 1}（型変換されない）</p>`);
        
        // != と !== の違い
        results.push('<h2>!= と !== の違い</h2>');
        results.push(`<p>10 != 5: ${10 != 5}</p>`);
        results.push(`<p>10 != '10': ${10 != '10'}（型変換される）</p>`);
        results.push(`<p>10 !== 5: ${10 !== 5}</p>`);
        results.push(`<p>10 !== '10': ${10 !== '10'}（型変換されない）</p>`);
        
        // 実践例: ユーザー入力の検証
        results.push('<h2>実践例: ユーザー入力の検証</h2>');
        
        function checkAge(input) {
            const age = Number(input);
            
            // 厳密等価演算子を使う
            if (age === 20) {
                return '20歳です';
            } else if (age !== 20) {
                return `20歳ではありません（${age}歳）`;
            }
        }
        
        results.push(`<p>checkAge(20): ${checkAge(20)}</p>`);
        results.push(`<p>checkAge('20'): ${checkAge('20')}</p>`);
        results.push(`<p>checkAge(25): ${checkAge(25)}</p>`);
        
        // null と undefined の比較
        results.push('<h2>null と undefined の比較</h2>');
        results.push(`<p>null == undefined: ${null == undefined}（型変換される）</p>`);
        results.push(`<p>null === undefined: ${null === undefined}（型変換されない）</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 等価性の比較 ===');
        console.log('10 == 10:', 10 == 10);
        console.log("10 == '10':", 10 == '10');
        console.log('10 === 10:', 10 === 10);
        console.log("10 === '10':", 10 === '10');
        console.log('推奨: === と !== を使う');
    </script>
</body>
</html>
```

---

## 比較演算子の基本

値の大小を比較する演算子を学びます。

### 基本的な比較演算子

#### より大きい（>）
```javascript
console.log(10 > 5);   // true
console.log(5 > 10);   // false
```

#### より小さい（<）
```javascript
console.log(5 < 10);   // true
console.log(10 < 5);   // false
```

#### 以上（>=）
```javascript
console.log(10 >= 10);  // true
console.log(10 >= 5);   // true
console.log(5 >= 10);   // false
```

#### 以下（<=）
```javascript
console.log(10 <= 10);  // true
console.log(5 <= 10);   // true
console.log(10 <= 5);   // false
```

### 文字列の比較

文字列も比較できます。辞書順（アルファベット順）で比較されます。

```javascript
console.log('apple' < 'banana');  // true
console.log('zoo' > 'apple');     // true
console.log('10' > '2');          // false（文字列として比較）
console.log('10' > '9');          // true（文字列として比較）
```

### 実践例: 比較演算子

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>比較演算子</title>
</head>
<body>
    <h1>比較演算子の基本</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 数値の比較
        results.push('<h2>数値の比較</h2>');
        results.push(`<p>10 > 5: ${10 > 5}</p>`);
        results.push(`<p>10 < 5: ${10 < 5}</p>`);
        results.push(`<p>10 >= 10: ${10 >= 10}</p>`);
        results.push(`<p>10 <= 5: ${10 <= 5}</p>`);
        
        // 文字列の比較
        results.push('<h2>文字列の比較</h2>');
        results.push(`<p>'apple' < 'banana': ${'apple' < 'banana'}</p>`);
        results.push(`<p>'zoo' > 'apple': ${'zoo' > 'apple'}</p>`);
        results.push(`<p>'10' > '2': ${'10' > '2'}（文字列として比較）</p>`);
        results.push(`<p>10 > 2: ${10 > 2}（数値として比較）</p>`);
        
        // 実践例: 年齢チェック
        results.push('<h2>実践例: 年齢チェック</h2>');
        
        function checkAge(age) {
            if (age >= 20) {
                return '成人です';
            } else if (age >= 0) {
                return '未成年です';
            } else {
                return '無効な年齢です';
            }
        }
        
        results.push(`<p>checkAge(25): ${checkAge(25)}</p>`);
        results.push(`<p>checkAge(18): ${checkAge(18)}</p>`);
        results.push(`<p>checkAge(-5): ${checkAge(-5)}</p>`);
        
        // 実践例: スコア判定
        results.push('<h2>実践例: スコア判定</h2>');
        
        function getGrade(score) {
            if (score >= 90) {
                return 'A';
            } else if (score >= 80) {
                return 'B';
            } else if (score >= 70) {
                return 'C';
            } else if (score >= 60) {
                return 'D';
            } else {
                return 'F';
            }
        }
        
        results.push(`<p>getGrade(95): ${getGrade(95)}</p>`);
        results.push(`<p>getGrade(85): ${getGrade(85)}</p>`);
        results.push(`<p>getGrade(75): ${getGrade(75)}</p>`);
        results.push(`<p>getGrade(55): ${getGrade(55)}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 比較演算子 ===');
        console.log('10 > 5:', 10 > 5);
        console.log('10 < 5:', 10 < 5);
        console.log('10 >= 10:', 10 >= 10);
        console.log('10 <= 5:', 10 <= 5);
        console.log("'apple' < 'banana':", 'apple' < 'banana');
    </script>
</body>
</html>
```

---

## NOT演算子

NOT演算子（`!`）は、真偽値を反転させます。

### NOT演算子の基本

```javascript
console.log(!true);   // false
console.log(!false);  // true
```

### 真偽値への変換と組み合わせ

```javascript
// falsyな値はtrueになる
console.log(!0);        // true
console.log(!'');       // true
console.log(!null);     // true
console.log(!undefined); // true

// truthyな値はfalseになる
console.log(!1);        // false
console.log(!'文字');   // false
console.log(![]);       // false
```

### 二重否定（!!）

二重否定（`!!`）を使うと、値を真偽値に変換できます。

```javascript
console.log(!!0);        // false
console.log(!!1);        // true
console.log(!!'文字');   // true
console.log(!!'');       // false
```

### 実践例: NOT演算子

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>NOT演算子</title>
</head>
<body>
    <h1>NOT演算子（!）</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // 基本的なNOT演算子
        results.push('<h2>基本的なNOT演算子</h2>');
        results.push(`<p>!true: ${!true}</p>`);
        results.push(`<p>!false: ${!false}</p>`);
        
        // 真偽値への変換
        results.push('<h2>真偽値への変換</h2>');
        results.push(`<p>!0: ${!0}（falsyな値はtrueになる）</p>`);
        results.push(`<p>!'': ${!''}（空文字列はtrueになる）</p>`);
        results.push(`<p>!null: ${!null}</p>`);
        results.push(`<p>!undefined: ${!undefined}</p>`);
        results.push(`<p>!1: ${!1}（truthyな値はfalseになる）</p>`);
        results.push(`<p>!'文字': ${!'文字'}</p>`);
        
        // 二重否定
        results.push('<h2>二重否定（!!）</h2>');
        results.push(`<p>!!0: ${!!0}（真偽値に変換）</p>`);
        results.push(`<p>!!1: ${!!1}</p>`);
        results.push(`<p>!!'文字': ${!!'文字'}</p>`);
        results.push(`<p>!!'': ${!!''}</p>`);
        
        // 実践例: 値の存在チェック
        results.push('<h2>実践例: 値の存在チェック</h2>');
        
        function hasValue(value) {
            return !!value;  // 値が存在するかチェック
        }
        
        results.push(`<p>hasValue('文字'): ${hasValue('文字')}</p>`);
        results.push(`<p>hasValue(''): ${hasValue('')}</p>`);
        results.push(`<p>hasValue(0): ${hasValue(0)}</p>`);
        results.push(`<p>hasValue(1): ${hasValue(1)}</p>`);
        results.push(`<p>hasValue(null): ${hasValue(null)}</p>`);
        
        // 実践例: 条件の反転
        results.push('<h2>実践例: 条件の反転</h2>');
        
        const isLoggedIn = false;
        
        if (!isLoggedIn) {
            results.push('<p>ログインしてください</p>');
        }
        
        const isEmpty = true;
        if (!isEmpty) {
            results.push('<p>データがあります</p>');
        } else {
            results.push('<p>データが空です</p>');
        }
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== NOT演算子 ===');
        console.log('!true:', !true);
        console.log('!false:', !false);
        console.log('!0:', !0);
        console.log('!!0:', !!0);
        console.log('!!1:', !!1);
    </script>
</body>
</html>
```

---

## コードをスッキリ書く 自己代入演算子

自己代入演算子は、変数に値を代入しながら計算を行う便利な演算子です。

### 基本的な自己代入演算子

#### +=（加算代入）
```javascript
let count = 10;
count += 5;  // count = count + 5 と同じ
console.log(count); // 15
```

#### -=（減算代入）
```javascript
let count = 10;
count -= 3;  // count = count - 3 と同じ
console.log(count); // 7
```

#### *=（乗算代入）
```javascript
let count = 10;
count *= 2;  // count = count * 2 と同じ
console.log(count); // 20
```

#### /=（除算代入）
```javascript
let count = 10;
count /= 2;  // count = count / 2 と同じ
console.log(count); // 5
```

#### %=（余り代入）
```javascript
let count = 10;
count %= 3;  // count = count % 3 と同じ
console.log(count); // 1
```

### 自己代入演算子のメリット

1. **コードが短くなる**: `count = count + 5` → `count += 5`
2. **読みやすい**: 意図が明確になる
3. **タイプミスが減る**: 変数名を1回しか書かない

### 実践例: 自己代入演算子

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>自己代入演算子</title>
</head>
<body>
    <h1>自己代入演算子</h1>
    <button id="addBtn">+5</button>
    <button id="subtractBtn">-3</button>
    <button id="multiplyBtn">×2</button>
    <button id="divideBtn">÷2</button>
    <div id="counter">10</div>
    <div id="output"></div>
    
    <script>
        let count = 10;
        
        const addBtn = document.getElementById('addBtn');
        const subtractBtn = document.getElementById('subtractBtn');
        const multiplyBtn = document.getElementById('multiplyBtn');
        const divideBtn = document.getElementById('divideBtn');
        const counter = document.getElementById('counter');
        const output = document.getElementById('output');
        
        function updateDisplay() {
            counter.textContent = count;
            
            const results = [];
            results.push('<h2>自己代入演算子の例</h2>');
            results.push(`<p>現在の値: ${count}</p>`);
            results.push('<p>+= 5: count += 5（count = count + 5 と同じ）</p>');
            results.push('<p>-= 3: count -= 3（count = count - 3 と同じ）</p>');
            results.push('<p>*= 2: count *= 2（count = count * 2 と同じ）</p>');
            results.push('<p>/= 2: count /= 2（count = count / 2 と同じ）</p>');
            
            output.innerHTML = results.join('');
        }
        
        // 初期表示
        updateDisplay();
        
        addBtn.addEventListener('click', function() {
            count += 5;  // 加算代入
            console.log('加算:', count);
            updateDisplay();
        });
        
        subtractBtn.addEventListener('click', function() {
            count -= 3;  // 減算代入
            console.log('減算:', count);
            updateDisplay();
        });
        
        multiplyBtn.addEventListener('click', function() {
            count *= 2;  // 乗算代入
            console.log('乗算:', count);
            updateDisplay();
        });
        
        divideBtn.addEventListener('click', function() {
            count /= 2;  // 除算代入
            console.log('除算:', count);
            updateDisplay();
        });
        
        // コンソールで確認
        console.log('=== 自己代入演算子 ===');
        let x = 10;
        console.log('x += 5:', x += 5);  // 15
        console.log('x -= 3:', x -= 3);  // 12
        console.log('x *= 2:', x *= 2);  // 24
        console.log('x /= 2:', x /= 2);  // 12
    </script>
</body>
</html>
```

---

## 論理演算子

論理演算子は、真偽値（`true`/`false`）を操作する演算子です。

### AND演算子（&&）

両方の値が`true`の場合に`true`を返します。

```javascript
console.log(true && true);   // true
console.log(true && false);  // false
console.log(false && true);  // false
console.log(false && false); // false
```

### OR演算子（||）

少なくとも一方が`true`の場合に`true`を返します。

```javascript
console.log(true || true);   // true
console.log(true || false);  // true
console.log(false || true);  // true
console.log(false || false); // false
```

### NOT演算子（!）

真偽値を反転させます（既に説明済み）。

```javascript
console.log(!true);   // false
console.log(!false);  // true
```

### 論理演算子の実践的な使い方

#### 条件分岐での使用
```javascript
const age = 25;
const hasLicense = true;

if (age >= 20 && hasLicense) {
    console.log('運転できます');
}

if (age < 18 || !hasLicense) {
    console.log('運転できません');
}
```

#### デフォルト値の設定
```javascript
const userName = '';  // 空文字列
const displayName = userName || 'ゲスト';  // デフォルト値
console.log(displayName); // 'ゲスト'
```

### 実践例: 論理演算子

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>論理演算子</title>
</head>
<body>
    <h1>論理演算子</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // AND演算子（&&）
        results.push('<h2>AND演算子（&&）</h2>');
        results.push(`<p>true && true: ${true && true}</p>`);
        results.push(`<p>true && false: ${true && false}</p>`);
        results.push(`<p>false && true: ${false && true}</p>`);
        results.push(`<p>false && false: ${false && false}</p>`);
        
        // OR演算子（||）
        results.push('<h2>OR演算子（||）</h2>');
        results.push(`<p>true || true: ${true || true}</p>`);
        results.push(`<p>true || false: ${true || false}</p>`);
        results.push(`<p>false || true: ${false || true}</p>`);
        results.push(`<p>false || false: ${false || false}</p>`);
        
        // NOT演算子（!）
        results.push('<h2>NOT演算子（!）</h2>');
        results.push(`<p>!true: ${!true}</p>`);
        results.push(`<p>!false: ${!false}</p>`);
        
        // 実践例: 条件分岐
        results.push('<h2>実践例: 条件分岐</h2>');
        
        const age = 25;
        const hasLicense = true;
        const hasCar = false;
        
        if (age >= 20 && hasLicense) {
            results.push('<p>✓ 運転できます（年齢と免許の両方の条件を満たす）</p>');
        }
        
        if (hasCar || hasLicense) {
            results.push('<p>✓ 車に関する何かを持っています（車または免許のどちらか）</p>');
        }
        
        if (!hasCar) {
            results.push('<p>✓ 車を持っていません</p>');
        }
        
        // 実践例: デフォルト値の設定
        results.push('<h2>実践例: デフォルト値の設定</h2>');
        
        const userName = '';
        const displayName = userName || 'ゲスト';
        results.push(`<p>ユーザー名が空の場合: "${userName}" → "${displayName}"</p>`);
        
        const userAge = 0;
        const defaultAge = userAge || 18;  // 0はfalsyなので18になる
        results.push(`<p>年齢が0の場合: ${userAge} → ${defaultAge}</p>`);
        
        // 実践例: 複数の条件
        results.push('<h2>実践例: 複数の条件</h2>');
        
        function canVote(age, isCitizen) {
            return age >= 18 && isCitizen;
        }
        
        results.push(`<p>canVote(20, true): ${canVote(20, true)}</p>`);
        results.push(`<p>canVote(16, true): ${canVote(16, true)}</p>`);
        results.push(`<p>canVote(20, false): ${canVote(20, false)}</p>`);
        
        function canEnter(age, hasTicket, isVip) {
            return (age >= 18 && hasTicket) || isVip;
        }
        
        results.push(`<p>canEnter(20, true, false): ${canEnter(20, true, false)}</p>`);
        results.push(`<p>canEnter(16, false, true): ${canEnter(16, false, true)}</p>`);
        
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 論理演算子 ===');
        console.log('AND:', true && false);
        console.log('OR:', true || false);
        console.log('NOT:', !true);
        console.log('条件分岐:', age >= 20 && hasLicense);
        console.log('デフォルト値:', userName || 'ゲスト');
    </script>
</body>
</html>
```

---

## まとめ

この章では、JavaScriptの演算子と計算について学びました。

### 学んだこと
- 演算子の基本概念
- 四則演算（+, -, *, /, %）
- 計算順序の制御（括弧の使い方）
- インクリメント・デクリメント（++, --）
- 等価性の比較（==, ===, !=, !==）
- 比較演算子（>, <, >=, <=）
- NOT演算子（!）
- 自己代入演算子（+=, -=, *=, /=, %=）
- 論理演算子（&&, ||, !）

### 重要なポイント
1. **`===`と`!==`を使う**（型変換されない厳密等価）
2. **括弧で計算順序を制御する**
3. **自己代入演算子でコードを簡潔に書く**
4. **論理演算子で複雑な条件を表現する**

### 次のステップ
次の章では、制御構文（条件分岐とループ）について詳しく学びます。

---

## 演習問題

### 問題1: 四則演算
2つの数値`15`と`4`に対して、四則演算（足し算、引き算、掛け算、割り算、余り）を行ってください。

<details>
<summary>解答例</summary>

```javascript
const a = 15;
const b = 4;

console.log('足し算:', a + b);   // 19
console.log('引き算:', a - b);   // 11
console.log('掛け算:', a * b);   // 60
console.log('割り算:', a / b);   // 3.75
console.log('余り:', a % b);     // 3
```
</details>

### 問題2: 計算順序の制御
`(20 + 5) * 3 - 10`を計算してください。括弧を使わない場合と使う場合の違いを確認してください。

<details>
<summary>解答例</summary>

```javascript
// 括弧なし
const result1 = 20 + 5 * 3 - 10;
console.log('括弧なし:', result1); // 25（掛け算が先）

// 括弧あり
const result2 = (20 + 5) * 3 - 10;
console.log('括弧あり:', result2); // 65（括弧内が先）
```
</details>

### 問題3: 等価性の比較
以下の比較を行い、結果を確認してください：
- `10 == '10'`
- `10 === '10'`
- `true == 1`
- `true === 1`

<details>
<summary>解答例</summary>

```javascript
console.log("10 == '10':", 10 == '10');   // true（型変換される）
console.log("10 === '10':", 10 === '10'); // false（型変換されない）
console.log('true == 1:', true == 1);      // true（型変換される）
console.log('true === 1:', true === 1);    // false（型変換されない）

// 結論: === を使うことが推奨される
```
</details>

### 問題4: 自己代入演算子
変数`count`を`10`で初期化し、以下の操作を自己代入演算子で行ってください：
- 5を足す
- 3を引く
- 2を掛ける
- 2で割る

<details>
<summary>解答例</summary>

```javascript
let count = 10;

count += 5;  // 15
count -= 3;  // 12
count *= 2;  // 24
count /= 2;  // 12

console.log('最終値:', count); // 12
```
</details>

### 問題5: 論理演算子
年齢が20以上で、かつ運転免許を持っている場合に「運転できます」と表示するプログラムを作成してください。

<details>
<summary>解答例</summary>

```javascript
const age = 25;
const hasLicense = true;

if (age >= 20 && hasLicense) {
    console.log('運転できます');
} else {
    console.log('運転できません');
}
```
</details>

---

お疲れ様でした！次の章に進みましょう。

