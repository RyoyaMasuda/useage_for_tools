# 2-1. 変数と定数

この章では、JavaScriptでデータを保存・管理するための「変数」と「定数」について学びます。プログラミングの基礎となる重要な概念です。

---

## 変数とは

### 変数の概念
変数（variable）は、データを一時的に保存しておく「箱」のようなものです。名前を付けて、その中に値を入れておくことができます。

### 日常生活での例
- **本棚**: 本を入れておく箱（変数）に「技術書」という名前（変数名）を付ける
- **財布**: お金を入れておく箱（変数）に「myWallet」という名前（変数名）を付ける

### プログラミングでの例
```javascript
// 変数「userName」に「太郎」という値を保存
const userName = '太郎';

// 変数「age」に「25」という値を保存
const age = 25;

// 保存した値を取り出して使用
console.log('名前:', userName); // 名前: 太郎
console.log('年齢:', age);      // 年齢: 25
```

### 変数を使う理由
1. **データの再利用**: 一度保存した値を何度でも使える
2. **コードの可読性**: 意味のある名前でコードが読みやすくなる
3. **値の変更**: 後で値を変更できる（定数は除く）
4. **計算の簡略化**: 複雑な計算結果を保存して再利用できる

### 実践例: 変数の基本

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>変数とは</title>
</head>
<body>
    <h1>変数の基本</h1>
    <button id="showBtn">情報を表示</button>
    <div id="output"></div>
    
    <script>
        // 変数の定義
        const userName = '山田太郎';
        const userAge = 25;
        const userCity = '東京';
        
        const showBtn = document.getElementById('showBtn');
        const output = document.getElementById('output');
        
        showBtn.addEventListener('click', function() {
            // 変数を使って情報を表示
            output.innerHTML = `
                <p>名前: ${userName}</p>
                <p>年齢: ${userAge}歳</p>
                <p>居住地: ${userCity}</p>
            `;
            
            // コンソールでも確認
            console.log('ユーザー情報');
            console.log('名前:', userName);
            console.log('年齢:', userAge);
            console.log('居住地:', userCity);
        });
    </script>
</body>
</html>
```

---

## 変数と定数

JavaScriptでは、値を保存する方法として「変数」と「定数」の2つがあります。

### 変数（let）と定数（const）の違い

| 種類 | 宣言キーワード | 値の変更 | 用途 |
|------|--------------|---------|------|
| **変数** | `let` | **可能** | 後で値が変わる可能性があるデータ |
| **定数** | `const` | **不可能** | 一度設定したら変更しないデータ |

### 変数（let）の例
```javascript
// 変数は後で値を変更できる
let count = 0;
console.log(count); // 0

count = 10;  // 値を変更
console.log(count); // 10

count = count + 5;  // 計算して変更
console.log(count); // 15
```

### 定数（const）の例
```javascript
// 定数は一度設定したら変更できない
const userName = '太郎';
console.log(userName); // 太郎

// userName = '花子'; // エラー！定数は変更できない
```

### どちらを使うべきか？

**原則: できるだけ`const`を使う**
- 値が変わらないことが明確になる
- 意図しない変更を防げる
- コードが読みやすくなる

**`let`を使う場面:**
- ループのカウンター
- 条件によって値が変わる場合
- ユーザー入力など、後で値が変わる可能性がある場合

### 実践例: 変数と定数の使い分け

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>変数と定数</title>
</head>
<body>
    <h1>変数と定数の使い分け</h1>
    <button id="incrementBtn">カウントアップ</button>
    <button id="resetBtn">リセット</button>
    <div id="counter">0</div>
    
    <script>
        // 定数: 変更しない値（アプリ名、設定値など）
        const APP_NAME = 'カウンターアプリ';
        const MAX_COUNT = 100;
        
        // 変数: 後で値が変わる可能性がある（カウンターの値）
        let count = 0;
        
        const incrementBtn = document.getElementById('incrementBtn');
        const resetBtn = document.getElementById('resetBtn');
        const counter = document.getElementById('counter');
        
        // アプリ名を表示（定数なので変更されない）
        console.log('アプリ名:', APP_NAME);
        
        incrementBtn.addEventListener('click', function() {
            // 変数なので値を変更できる
            if (count < MAX_COUNT) {
                count = count + 1;
                counter.textContent = count;
                console.log('現在のカウント:', count);
            } else {
                alert('最大値に達しました！');
            }
        });
        
        resetBtn.addEventListener('click', function() {
            // 変数なので値をリセットできる
            count = 0;
            counter.textContent = count;
            console.log('カウントをリセットしました');
        });
    </script>
</body>
</html>
```

---

## 変数の命名規則

変数名には、いくつかのルールがあります。正しい命名規則を守ることで、エラーを防ぎ、コードを読みやすくできます。

### 基本的なルール

#### 1. 使用できる文字
- **英数字**: `a-z`, `A-Z`, `0-9`
- **アンダースコア**: `_`
- **ドル記号**: `$`
- **日本語**: 使用可能だが、非推奨

```javascript
// 正しい例
const userName = '太郎';
const user_name = '太郎';
const user1 = '太郎';
const $user = '太郎';

// エラーになる例
// const user-name = '太郎';  // ハイフンは使えない
// const 123user = '太郎';    // 数字で始められない
// const user name = '太郎';  // スペースは使えない
```

#### 2. 数字で始められない
```javascript
// エラー
// const 1user = '太郎';

// 正しい
const user1 = '太郎';
const user2 = '花子';
```

#### 3. 予約語は使えない
JavaScriptで特別な意味を持つ単語（予約語）は変数名に使えません。

```javascript
// エラーになる予約語の例
// const let = '値';
// const const = '値';
// const function = '値';
// const if = '値';
// const return = '値';
```

主要な予約語: `let`, `const`, `var`, `function`, `if`, `else`, `for`, `while`, `return`, `class`, `import`, `export` など

#### 4. 大文字と小文字は区別される
```javascript
const userName = '太郎';
const UserName = '花子';
const USERNAME = '次郎';

console.log(userName);  // 太郎
console.log(UserName);  // 花子
console.log(USERNAME);  // 次郎
// これらは全て別の変数として扱われる
```

### 命名規則のベストプラクティス

#### 1. キャメルケース（camelCase）
単語の最初の文字を大文字にする（最初の単語は小文字）。

```javascript
// 推奨
const userName = '太郎';
const userAge = 25;
const isLoggedIn = true;
const firstName = '太郎';
const lastName = '山田';
```

#### 2. スネークケース（snake_case）
単語をアンダースコアで区切る。

```javascript
// 使用可能（JavaScriptではキャメルケースが一般的）
const user_name = '太郎';
const user_age = 25;
const is_logged_in = true;
```

#### 3. 定数の大文字表記
定数で、変更しない値（設定値など）は大文字で書くことが多い。

```javascript
// 定数の大文字表記
const MAX_COUNT = 100;
const API_URL = 'https://api.example.com';
const PI = 3.14159;
```

#### 4. 意味のある名前を付ける
変数名から、その変数が何を表しているか分かるようにする。

```javascript
// 悪い例: 意味が分からない
const x = '太郎';
const n = 25;
const d = true;

// 良い例: 意味が明確
const userName = '太郎';
const userAge = 25;
const isActive = true;
```

### 実践例: 命名規則の練習

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>変数の命名規則</title>
</head>
<body>
    <h1>変数の命名規則</h1>
    <div id="output"></div>
    
    <script>
        // 正しい命名規則の例
        
        // キャメルケース（推奨）
        const firstName = '太郎';
        const lastName = '山田';
        const fullName = firstName + ' ' + lastName;
        
        // 数値の変数
        const userAge = 25;
        const birthYear = 1999;
        
        // 真偽値（is, has, can などで始める）
        const isStudent = true;
        const hasLicense = false;
        const canDrive = false;
        
        // 定数の大文字表記（設定値など）
        const MAX_AGE = 120;
        const MIN_AGE = 0;
        const DEFAULT_NAME = 'ゲスト';
        
        // 配列（複数形の名前）
        const userNames = ['太郎', '花子', '次郎'];
        const ages = [25, 30, 20];
        
        // オブジェクト
        const userInfo = {
            name: fullName,
            age: userAge,
            isStudent: isStudent
        };
        
        // 結果を表示
        const output = document.getElementById('output');
        output.innerHTML = `
            <h2>変数名の例</h2>
            <p>名前: ${fullName}</p>
            <p>年齢: ${userAge}歳</p>
            <p>学生: ${isStudent ? 'はい' : 'いいえ'}</p>
            <p>運転免許: ${hasLicense ? 'あり' : 'なし'}</p>
            <p>最大年齢: ${MAX_AGE}歳</p>
            <p>ユーザーリスト: ${userNames.join(', ')}</p>
        `;
        
        // コンソールで確認
        console.log('ユーザー情報:', userInfo);
        console.log('設定値 - 最大年齢:', MAX_AGE);
    </script>
</body>
</html>
```

---

## 値の再代入

変数（`let`）は、一度値を設定した後でも、別の値を再代入できます。

### 基本的な再代入

```javascript
// 変数の宣言と初期値の設定
let message = 'こんにちは';
console.log(message); // こんにちは

// 値の再代入
message = 'こんばんは';
console.log(message); // こんばんは

// さらに再代入
message = 'おはよう';
console.log(message); // おはよう
```

### 定数（const）は再代入できない

```javascript
// 定数は再代入できない
const userName = '太郎';
console.log(userName); // 太郎

// userName = '花子'; // エラー！TypeError: Assignment to constant variable.
```

### 計算結果の再代入

```javascript
let count = 0;
console.log(count); // 0

// 現在の値を使って計算
count = count + 1;
console.log(count); // 1

count = count + 5;
console.log(count); // 6

count = count * 2;
console.log(count); // 12
```

### 実践例: 値の再代入

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>値の再代入</title>
</head>
<body>
    <h1>値の再代入の練習</h1>
    <button id="changeBtn">値を変更</button>
    <button id="calcBtn">計算する</button>
    <div id="output"></div>
    
    <script>
        // 変数: 再代入可能
        let currentValue = 10;
        
        // 定数: 再代入不可
        const fixedValue = 100;
        
        const changeBtn = document.getElementById('changeBtn');
        const calcBtn = document.getElementById('calcBtn');
        const output = document.getElementById('output');
        
        function updateDisplay() {
            output.innerHTML = `
                <p>変数（再代入可能）: ${currentValue}</p>
                <p>定数（再代入不可）: ${fixedValue}</p>
            `;
        }
        
        // 初期表示
        updateDisplay();
        
        changeBtn.addEventListener('click', function() {
            // 変数は再代入できる
            currentValue = Math.floor(Math.random() * 100);
            console.log('値を変更:', currentValue);
            updateDisplay();
        });
        
        calcBtn.addEventListener('click', function() {
            // 現在の値を使って計算
            currentValue = currentValue + 10;
            console.log('計算後の値:', currentValue);
            updateDisplay();
        });
        
        // 定数の再代入を試みるとエラー（コメントアウト）
        // fixedValue = 200; // エラー！
    </script>
</body>
</html>
```

---

## 変数宣言 const

`const`は、**定数**を宣言するキーワードです。一度値を設定すると、変更できません。

### constの基本構文

```javascript
const 変数名 = 値;
```

### constの特徴

1. **再代入不可**: 一度設定した値は変更できない
2. **初期値必須**: 宣言と同時に値を設定する必要がある
3. **ブロックスコープ**: `{}`で囲まれた範囲でのみ有効

### 基本的な使い方

```javascript
// 文字列の定数
const userName = '太郎';
console.log(userName); // 太郎

// 数値の定数
const userAge = 25;
console.log(userAge); // 25

// 真偽値の定数
const isActive = true;
console.log(isActive); // true
```

### エラーになる例

```javascript
// エラー1: 初期値なし
// const userName; // SyntaxError

// エラー2: 再代入
const count = 10;
// count = 20; // TypeError
```

### constを使うべき場面

- 設定値（APIのURL、最大値など）
- ユーザー情報（名前、IDなど、変更しない値）
- 計算結果（一度計算したら変更しない値）
- **原則として、値が変わらないものは全てconstを使う**

### 実践例: constの活用

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>constの使い方</title>
</head>
<body>
    <h1>const（定数）の練習</h1>
    <div id="output"></div>
    
    <script>
        // アプリケーションの設定（変更しない値）
        const APP_NAME = 'ユーザー管理アプリ';
        const MAX_USERS = 100;
        const API_BASE_URL = 'https://api.example.com';
        
        // ユーザー情報（一度設定したら変更しない）
        const userId = 'U001';
        const userName = '山田太郎';
        const userEmail = 'yamada@example.com';
        const registrationDate = '2024-01-01';
        
        // 計算結果（一度計算したら変更しない）
        const currentYear = 2024;
        const birthYear = 1999;
        const age = currentYear - birthYear;
        
        // 結果を表示
        const output = document.getElementById('output');
        output.innerHTML = `
            <h2>アプリ設定</h2>
            <p>アプリ名: ${APP_NAME}</p>
            <p>最大ユーザー数: ${MAX_USERS}人</p>
            <p>API URL: ${API_BASE_URL}</p>
            
            <h2>ユーザー情報</h2>
            <p>ID: ${userId}</p>
            <p>名前: ${userName}</p>
            <p>メール: ${userEmail}</p>
            <p>登録日: ${registrationDate}</p>
            
            <h2>計算結果</h2>
            <p>現在の年: ${currentYear}年</p>
            <p>生年: ${birthYear}年</p>
            <p>年齢: ${age}歳</p>
        `;
        
        // コンソールで確認
        console.log('=== 定数の使用例 ===');
        console.log('アプリ名:', APP_NAME);
        console.log('ユーザー名:', userName);
        console.log('計算された年齢:', age);
        
        // エラーになる例（コメントアウト）
        // userName = '花子'; // TypeError
        // APP_NAME = '別のアプリ'; // TypeError
    </script>
</body>
</html>
```

---

## 変数宣言 let

`let`は、**変数**を宣言するキーワードです。値を後で変更できます。

### letの基本構文

```javascript
let 変数名 = 値;
```

### letの特徴

1. **再代入可能**: 後で値を変更できる
2. **初期値は任意**: 宣言時に値を設定しなくてもよい
3. **ブロックスコープ**: `{}`で囲まれた範囲でのみ有効

### 基本的な使い方

```javascript
// 初期値を設定
let count = 0;
console.log(count); // 0

// 値を変更
count = 10;
console.log(count); // 10

// 初期値なしで宣言（undefinedになる）
let message;
console.log(message); // undefined

// 後で値を設定
message = 'こんにちは';
console.log(message); // こんにちは
```

### letを使うべき場面

- ループのカウンター
- ユーザー入力を受け取る変数
- 条件によって値が変わる変数
- 計算結果を何度も更新する変数

### 実践例: letの活用

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>letの使い方</title>
</head>
<body>
    <h1>let（変数）の練習</h1>
    <button id="incrementBtn">+1</button>
    <button id="decrementBtn">-1</button>
    <button id="resetBtn">リセット</button>
    <div id="counter">0</div>
    <div id="history"></div>
    
    <script>
        // 変数: 後で値が変わる
        let count = 0;
        let operationCount = 0; // 操作回数
        
        const incrementBtn = document.getElementById('incrementBtn');
        const decrementBtn = document.getElementById('decrementBtn');
        const resetBtn = document.getElementById('resetBtn');
        const counter = document.getElementById('counter');
        const history = document.getElementById('history');
        
        function updateDisplay() {
            counter.textContent = count;
            history.textContent = `操作回数: ${operationCount}回`;
        }
        
        // 初期表示
        updateDisplay();
        
        incrementBtn.addEventListener('click', function() {
            // 変数なので値を変更できる
            count = count + 1;
            operationCount = operationCount + 1;
            console.log('カウントアップ:', count);
            updateDisplay();
        });
        
        decrementBtn.addEventListener('click', function() {
            // 変数なので値を変更できる
            count = count - 1;
            operationCount = operationCount + 1;
            console.log('カウントダウン:', count);
            updateDisplay();
        });
        
        resetBtn.addEventListener('click', function() {
            // 変数なので値をリセットできる
            count = 0;
            operationCount = operationCount + 1;
            console.log('リセット:', count);
            updateDisplay();
        });
    </script>
</body>
</html>
```

### letとconstの比較

```javascript
// const: 値が変わらない
const userName = '太郎';
// userName = '花子'; // エラー

// let: 値が変わる
let score = 0;
score = 100; // OK
score = score + 50; // OK
```

---

## 変数宣言 var

`var`は、**古い変数宣言**のキーワードです。現在は`let`と`const`を使うことが推奨されています。

### varの基本構文

```javascript
var 変数名 = 値;
```

### varの特徴（問題点）

1. **関数スコープ**: ブロック（`{}`）を無視する
2. **再宣言可能**: 同じ変数を何度でも宣言できる
3. **ホイスティング**: 宣言前に使用できてしまう

### varの問題点の例

#### 問題1: ブロックスコープが効かない

```javascript
// letの場合（正しい動作）
if (true) {
    let x = 10;
}
// console.log(x); // ReferenceError（エラー）

// varの場合（問題のある動作）
if (true) {
    var y = 20;
}
console.log(y); // 20（エラーにならない！）
```

#### 問題2: 再宣言ができてしまう

```javascript
// letの場合
let count = 10;
// let count = 20; // SyntaxError（エラー）

// varの場合
var count = 10;
var count = 20; // エラーにならない（問題！）
console.log(count); // 20
```

#### 問題3: ホイスティング

```javascript
// letの場合
// console.log(x); // ReferenceError
// let x = 10;

// varの場合（問題のある動作）
console.log(y); // undefined（エラーにならない！）
var y = 10;
```

### varは使わない

**現代のJavaScriptでは、`var`は使わず、`let`と`const`を使いましょう。**

- `const`: 値が変わらない場合
- `let`: 値が変わる場合

### 実践例: varの問題点の確認

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>varの問題点</title>
</head>
<body>
    <h1>varの問題点（参考）</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let messages = [];
        
        // ===== letの動作（推奨） =====
        if (true) {
            let letVariable = 'letの変数';
            messages.push('let: ブロック内で定義');
        }
        // letVariableはブロック外では使えない（正しい動作）
        // messages.push(letVariable); // ReferenceError
        
        // ===== varの動作（非推奨） =====
        if (true) {
            var varVariable = 'varの変数';
            messages.push('var: ブロック内で定義');
        }
        // varVariableはブロック外でも使えてしまう（問題！）
        messages.push('var: ブロック外でも使える: ' + varVariable);
        
        // varは再宣言できてしまう（問題！）
        var count = 10;
        var count = 20; // エラーにならない
        messages.push('var: 再宣言可能（問題）: ' + count);
        
        // letは再宣言できない（正しい動作）
        let number = 10;
        // let number = 20; // SyntaxError
        
        // 結果を表示
        output.innerHTML = '<h2>動作の違い</h2>' + 
            messages.map(msg => `<p>${msg}</p>`).join('');
        
        console.log('=== まとめ ===');
        console.log('let/constを使いましょう！');
        console.log('varは使わないようにしましょう！');
    </script>
</body>
</html>
```

---

## 変数のコピー

変数の値を別の変数にコピーする方法を学びます。データ型によって動作が異なるので注意が必要です。

### プリミティブ型のコピー

文字列、数値、真偽値などのプリミティブ型は、**値そのものがコピー**されます。

```javascript
// 文字列のコピー
const original = 'Hello';
const copy = original; // 値がコピーされる

console.log(original); // Hello
console.log(copy);     // Hello

// コピーを変更しても、元の値は変わらない
const modified = copy + ' World';
console.log(original); // Hello（変わらない）
console.log(copy);     // Hello（変わらない）
console.log(modified); // Hello World
```

### オブジェクト型のコピー（参照）

配列やオブジェクトは、**参照（メモリ上の場所）がコピー**されます。

```javascript
// 配列のコピー（参照がコピーされる）
const originalArray = [1, 2, 3];
const copyArray = originalArray; // 参照がコピーされる

console.log(originalArray); // [1, 2, 3]
console.log(copyArray);     // [1, 2, 3]

// コピーを変更すると、元の値も変わる！
copyArray.push(4);
console.log(originalArray); // [1, 2, 3, 4]（元も変わった！）
console.log(copyArray);     // [1, 2, 3, 4]
```

### オブジェクトの独立したコピーを作る方法

#### 方法1: スプレッド構文（推奨）

```javascript
// 配列の独立したコピー
const original = [1, 2, 3];
const copy = [...original]; // 新しい配列を作成

copy.push(4);
console.log(original); // [1, 2, 3]（元は変わらない）
console.log(copy);     // [1, 2, 3, 4]
```

#### 方法2: Array.from()

```javascript
const original = [1, 2, 3];
const copy = Array.from(original);

copy.push(4);
console.log(original); // [1, 2, 3]
console.log(copy);     // [1, 2, 3, 4]
```

### 実践例: 変数のコピー

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>変数のコピー</title>
</head>
<body>
    <h1>変数のコピー</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        let results = [];
        
        // ===== プリミティブ型のコピー =====
        results.push('<h2>プリミティブ型のコピー</h2>');
        
        const originalString = 'Hello';
        const copyString = originalString;
        
        results.push(`<p>元の文字列: ${originalString}</p>`);
        results.push(`<p>コピー: ${copyString}</p>`);
        
        const modifiedString = copyString + ' World';
        results.push(`<p>コピーを変更: ${modifiedString}</p>`);
        results.push(`<p>元の文字列（変更なし）: ${originalString}</p>`);
        
        // ===== オブジェクト型のコピー（参照） =====
        results.push('<h2>オブジェクト型のコピー（参照）</h2>');
        
        const originalArray = [1, 2, 3];
        const referenceCopy = originalArray; // 参照がコピーされる
        
        results.push(`<p>元の配列: [${originalArray.join(', ')}]</p>`);
        results.push(`<p>参照コピー: [${referenceCopy.join(', ')}]</p>`);
        
        referenceCopy.push(4);
        results.push(`<p>参照コピーを変更後:</p>`);
        results.push(`<p>元の配列（変更された！）: [${originalArray.join(', ')}]</p>`);
        results.push(`<p>参照コピー: [${referenceCopy.join(', ')}]</p>`);
        
        // ===== 独立したコピー =====
        results.push('<h2>独立したコピー（スプレッド構文）</h2>');
        
        const originalArray2 = [1, 2, 3];
        const independentCopy = [...originalArray2]; // 新しい配列を作成
        
        results.push(`<p>元の配列: [${originalArray2.join(', ')}]</p>`);
        results.push(`<p>独立コピー: [${independentCopy.join(', ')}]</p>`);
        
        independentCopy.push(4);
        results.push(`<p>独立コピーを変更後:</p>`);
        results.push(`<p>元の配列（変更なし）: [${originalArray2.join(', ')}]</p>`);
        results.push(`<p>独立コピー: [${independentCopy.join(', ')}]</p>`);
        
        // 結果を表示
        output.innerHTML = results.join('');
        
        // コンソールで確認
        console.log('=== 変数のコピー ===');
        console.log('プリミティブ型は値がコピーされる');
        console.log('オブジェクト型は参照がコピーされる');
        console.log('独立したコピーが必要な場合はスプレッド構文を使う');
    </script>
</body>
</html>
```

---

## 変数と文字列の連結

変数と文字列を組み合わせて、新しい文字列を作成する方法を学びます。

### +演算子を使った連結

```javascript
const firstName = '太郎';
const lastName = '山田';

// 文字列の連結
const fullName = firstName + ' ' + lastName;
console.log(fullName); // 太郎 山田

// 数値と文字列の連結
const age = 25;
const message = '年齢は' + age + '歳です';
console.log(message); // 年齢は25歳です
```

### 複数の変数を連結

```javascript
const userName = '太郎';
const userAge = 25;
const userCity = '東京';

// 複数の変数を連結
const userInfo = '名前: ' + userName + ', 年齢: ' + userAge + ', 居住地: ' + userCity;
console.log(userInfo);
// 名前: 太郎, 年齢: 25, 居住地: 東京
```

### 数値の連結に注意

```javascript
// 文字列として連結される
const num1 = 10;
const num2 = 20;
const result = num1 + num2; // 数値の足し算
console.log(result); // 30

// 文字列と数値を連結すると文字列になる
const message = '合計: ' + num1 + num2;
console.log(message); // 合計: 1020（文字列として連結）

// 正しい方法: 先に計算する
const correctMessage = '合計: ' + (num1 + num2);
console.log(correctMessage); // 合計: 30
```

### 実践例: 文字列の連結

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>変数と文字列の連結</title>
</head>
<body>
    <h1>変数と文字列の連結</h1>
    <div id="output"></div>
    
    <script>
        // ユーザー情報
        const firstName = '太郎';
        const lastName = '山田';
        const age = 25;
        const city = '東京';
        
        // 基本的な連結
        const fullName = firstName + ' ' + lastName;
        const greeting = 'こんにちは、' + fullName + 'さん';
        
        // 複数の情報を連結
        const userInfo = 
            '名前: ' + fullName + '\n' +
            '年齢: ' + age + '歳\n' +
            '居住地: ' + city;
        
        // HTMLに表示用の文字列
        const htmlContent = 
            '<h2>ユーザー情報</h2>' +
            '<p>' + greeting + '</p>' +
            '<p>名前: ' + fullName + '</p>' +
            '<p>年齢: ' + age + '歳</p>' +
            '<p>居住地: ' + city + '</p>';
        
        // 結果を表示
        const output = document.getElementById('output');
        output.innerHTML = htmlContent;
        
        // コンソールで確認
        console.log('=== 文字列の連結 ===');
        console.log('フルネーム:', fullName);
        console.log('挨拶:', greeting);
        console.log('ユーザー情報:\n' + userInfo);
        
        // 注意: 数値の連結
        const num1 = 10;
        const num2 = 20;
        console.log('数値の足し算:', num1 + num2); // 30
        console.log('文字列として連結:', num1 + num2 + '円'); // 30円
        console.log('間違った連結:', '合計: ' + num1 + num2); // 合計: 1020
        console.log('正しい連結:', '合計: ' + (num1 + num2)); // 合計: 30
    </script>
</body>
</html>
```

---

## テンプレートリテラル

テンプレートリテラルは、文字列の中に変数を埋め込むことができる、より便利な方法です。

### テンプレートリテラルの基本

バッククォート（`）で囲み、`${変数名}`で変数を埋め込みます。

```javascript
const userName = '太郎';
const age = 25;

// テンプレートリテラル（推奨）
const message = `こんにちは、${userName}さん。年齢は${age}歳です。`;
console.log(message);
// こんにちは、太郎さん。年齢は25歳です。

// 従来の方法（+演算子）
const oldMessage = 'こんにちは、' + userName + 'さん。年齢は' + age + '歳です。';
console.log(oldMessage);
```

### テンプレートリテラルの特徴

#### 1. 複数行の文字列が書きやすい

```javascript
// テンプレートリテラル（複数行OK）
const multiLine = `
  これは
  複数行の
  文字列です
`;
console.log(multiLine);

// 従来の方法（\nが必要）
const oldMultiLine = 'これは\n複数行の\n文字列です';
```

#### 2. 式を埋め込める

```javascript
const num1 = 10;
const num2 = 20;

// 計算式を埋め込める
const result = `${num1} + ${num2} = ${num1 + num2}`;
console.log(result); // 10 + 20 = 30
```

#### 3. 関数呼び出しも埋め込める

```javascript
function greet(name) {
    return `こんにちは、${name}さん`;
}

const message = `${greet('太郎')}。今日は良い天気ですね。`;
console.log(message);
// こんにちは、太郎さん。今日は良い天気ですね。
```

### 実践例: テンプレートリテラルの活用

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>テンプレートリテラル</title>
</head>
<body>
    <h1>テンプレートリテラル</h1>
    <div id="output"></div>
    
    <script>
        // ユーザー情報
        const firstName = '太郎';
        const lastName = '山田';
        const age = 25;
        const city = '東京';
        const email = 'yamada@example.com';
        
        // テンプレートリテラルで文字列を作成
        const greeting = `こんにちは、${firstName} ${lastName}さん！`;
        
        // 複数行の文字列
        const userProfile = `
            <h2>ユーザープロフィール</h2>
            <p><strong>名前:</strong> ${firstName} ${lastName}</p>
            <p><strong>年齢:</strong> ${age}歳</p>
            <p><strong>居住地:</strong> ${city}</p>
            <p><strong>メール:</strong> ${email}</p>
        `;
        
        // 計算式を埋め込む
        const currentYear = 2024;
        const birthYear = currentYear - age;
        const ageInfo = `${firstName}さんは${birthYear}年生まれで、現在${age}歳です。`;
        
        // 条件分岐を埋め込む
        const isAdult = age >= 20;
        const statusMessage = `${firstName}さんは${isAdult ? '成人' : '未成年'}です。`;
        
        // 関数呼び出しを埋め込む
        function getFullName(first, last) {
            return `${first} ${last}`;
        }
        const fullNameMessage = `フルネーム: ${getFullName(firstName, lastName)}`;
        
        // 結果を表示
        const output = document.getElementById('output');
        output.innerHTML = `
            <p>${greeting}</p>
            ${userProfile}
            <p>${ageInfo}</p>
            <p>${statusMessage}</p>
            <p>${fullNameMessage}</p>
        `;
        
        // コンソールで確認
        console.log('=== テンプレートリテラル ===');
        console.log(greeting);
        console.log(ageInfo);
        console.log(statusMessage);
        console.log(fullNameMessage);
        
        // 従来の方法との比較
        const oldWay = '名前: ' + firstName + ' ' + lastName + ', 年齢: ' + age + '歳';
        const newWay = `名前: ${firstName} ${lastName}, 年齢: ${age}歳`;
        
        console.log('従来の方法:', oldWay);
        console.log('テンプレートリテラル:', newWay);
        console.log('テンプレートリテラルの方が読みやすい！');
    </script>
</body>
</html>
```

### テンプレートリテラルと+演算子の比較

| 方法 | メリット | デメリット |
|------|---------|-----------|
| **+演算子** | 古いブラウザでも動作 | 読みにくい、書きにくい |
| **テンプレートリテラル** | 読みやすい、書きやすい、複数行OK | 古いブラウザでは動作しない場合がある（現在は問題なし） |

**結論: テンプレートリテラルを使いましょう！**

---

## まとめ

この章では、変数と定数について学びました。

### 学んだこと
- 変数とは何か、その役割と使い方
- 変数（`let`）と定数（`const`）の違い
- 変数の命名規則とベストプラクティス
- 値の再代入の方法
- `const`、`let`、`var`の違い（`var`は使わない）
- 変数のコピー（プリミティブ型とオブジェクト型の違い）
- 文字列の連結方法（+演算子とテンプレートリテラル）

### 重要なポイント
1. **原則として`const`を使う**（値が変わらない場合）
2. **値が変わる場合のみ`let`を使う**
3. **`var`は使わない**（古い書き方）
4. **テンプレートリテラルで文字列を作成する**（読みやすい）

### 次のステップ
次の章では、データ型について詳しく学びます。

---

## 演習問題

### 問題1: 変数の宣言
自分の名前、年齢、居住地を定数として宣言し、コンソールに表示してください。

<details>
<summary>解答例</summary>

```javascript
const myName = '山田太郎';
const myAge = 25;
const myCity = '東京';

console.log('名前:', myName);
console.log('年齢:', myAge);
console.log('居住地:', myCity);
```
</details>

### 問題2: 変数と定数の使い分け
カウンターアプリを作成してください。カウント値は変数（`let`）で、最大値は定数（`const`）で定義してください。

<details>
<summary>解答例</summary>

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>カウンター</title>
</head>
<body>
    <h1>カウンターアプリ</h1>
    <button id="incrementBtn">+1</button>
    <div id="count">0</div>
    
    <script>
        const MAX_COUNT = 100;
        let count = 0;
        
        const incrementBtn = document.getElementById('incrementBtn');
        const countDisplay = document.getElementById('count');
        
        incrementBtn.addEventListener('click', function() {
            if (count < MAX_COUNT) {
                count = count + 1;
                countDisplay.textContent = count;
            }
        });
    </script>
</body>
</html>
```
</details>

### 問題3: テンプレートリテラル
テンプレートリテラルを使って、ユーザー情報を表示するメッセージを作成してください。

<details>
<summary>解答例</summary>

```javascript
const userName = '花子';
const age = 30;
const city = '大阪';

const message = `
  ユーザー情報:
  名前: ${userName}
  年齢: ${age}歳
  居住地: ${city}
`;

console.log(message);
```
</details>

### 問題4: 変数のコピー
配列をコピーして、コピーを変更しても元の配列が変わらないようにしてください。

<details>
<summary>解答例</summary>

```javascript
const originalArray = [1, 2, 3];
const copyArray = [...originalArray]; // スプレッド構文でコピー

copyArray.push(4);
console.log('元の配列:', originalArray); // [1, 2, 3]
console.log('コピー:', copyArray);       // [1, 2, 3, 4]
```
</details>

### 問題5: 命名規則
以下の変数名を、適切な命名規則（キャメルケース）に修正してください。
- `user name` → `userName`
- `userage` → `userAge`
- `isloggedin` → `isLoggedIn`
- `MAXCOUNT` → `MAX_COUNT`（定数の場合）

<details>
<summary>解答例</summary>

```javascript
// 修正後
const userName = '太郎';
const userAge = 25;
const isLoggedIn = true;
const MAX_COUNT = 100;

console.log(userName, userAge, isLoggedIn, MAX_COUNT);
```
</details>

---

お疲れ様でした！次の章に進みましょう。

